<!DOCTYPE html>
<html>
<head>
    <title>Test Conditional PDF Fix</title>
</head>
<body>
    <h1>Test Conditional PDF Fix</h1>
    <p>This test verifies that conditional PDFs are properly downloaded when conditions are met.</p>
    
    <h2>Test Scenario:</h2>
    <ol>
        <li>Select "No" for q1 - should download form2.pdf in addition to form1.pdf</li>
        <li>Select "Yes" for q1 - should only download form1.pdf</li>
    </ol>
    
    <h2>Test JSON:</h2>
    <pre id="testJson">
{
  "sections": [
    {
      "sectionId": 1,
      "sectionName": "Enter Name",
      "questions": [
        {
          "questionId": 1,
          "text": "q1",
          "type": "dropdown",
          "logic": {
            "enabled": false,
            "conditions": []
          },
          "jump": {
            "enabled": false,
            "conditions": []
          },
          "conditionalPDF": {
            "enabled": true,
            "pdfName": "form2.pdf",
            "answer": "No"
          },
          "pdfLogic": {
            "enabled": false,
            "pdfName": "",
            "stripePriceId": "",
            "conditions": []
          },
          "alertLogic": {
            "enabled": false,
            "message": "",
            "conditions": []
          },
          "checklistLogic": {
            "enabled": false,
            "conditions": []
          },
          "conditionalAlert": {
            "enabled": false,
            "prevQuestion": "",
            "prevAnswer": "",
            "text": ""
          },
          "subtitle": {
            "enabled": false,
            "text": ""
          },
          "infoBox": {
            "enabled": false,
            "text": ""
          },
          "options": [
            "No",
            "Yes"
          ],
          "labels": [],
          "nameId": "q1",
          "placeholder": "",
          "linking": {
            "enabled": false,
            "targetId": ""
          },
          "image": {
            "url": "",
            "width": 0,
            "height": 0
          }
        }
      ]
    }
  ],
  "groups": [],
  "hiddenFields": [],
  "sectionCounter": 2,
  "questionCounter": 1,
  "hiddenFieldCounter": 1,
  "groupCounter": 1,
  "defaultPDFName": "form1.pdf",
  "pdfOutputName": "example.html",
  "stripePriceId": "price_1Ri8ASFJeSRMFQ8XDhtdSkFr",
  "additionalPDFs": [],
  "checklistItems": []
}
    </pre>
    
    <h2>Instructions:</h2>
    <ol>
        <li>Open the FormWiz GUI in your browser (http://localhost:8000/gui.html)</li>
        <li>Copy the JSON above</li>
        <li>Click "Import JSON" and paste the JSON</li>
        <li>Generate the HTML form</li>
        <li>Test the conditional PDF behavior as described above</li>
    </ol>
    
    <h2>Expected Result:</h2>
    <p>After the fix, when q1 is set to "No", both form1.pdf and form2.pdf should be downloaded. When q1 is set to "Yes", only form1.pdf should be downloaded.</p>
    
    <h2>What was fixed:</h2>
    <p>The <code>processAllPdfs()</code> function was missing the logic to process conditional PDFs. I added a new section that:</p>
    <ul>
        <li>Iterates through all conditional PDFs</li>
        <li>Checks if the condition is met (question answer matches the conditional answer)</li>
        <li>Downloads the conditional PDF if the condition is true</li>
    </ul>
</body>
</html>

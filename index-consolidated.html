<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowchart Creation Tool - Modular Version</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <!-- mxGraph Library -->
    <script src="https://cdn.jsdelivr.net/npm/mxgraph@4.2.2/javascript/mxClient.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Additional styles for modular version */
        .module-info {
            background: #f0f8ff;
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        
        .module-list {
            list-style: none;
            padding: 0;
        }
        
        .module-list li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .module-list li:before {
            content: "‚úì ";
            color: green;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Flowchart Creation Tool</h1>
            <p><strong>Modular Version</strong> - Organized into separate JavaScript modules for better maintainability</p>
        </header>
        
        <div class="module-info">
            <h3>üìÅ Module Structure</h3>
            <ul class="module-list">
                <li><strong>script.js</strong> - Main coordinator and initialization</li>
                <li><strong>auth.js</strong> - Authentication and user management</li>
                <li><strong>graph.js</strong> - Graph initialization and management</li>
                <li><strong>nodes.js</strong> - Node creation and management</li>
                <li><strong>ui.js</strong> - UI interactions and menus</li>
                <li><strong>export.js</strong> - Import/export functionality</li>
                <li><strong>settings.js</strong> - Settings and preferences</li>
                <li><strong>legend.js</strong> - Colors and sections</li>
                <li><strong>calc.js</strong> - Calculation nodes</li>
                <li><strong>library.js</strong> - Core utilities and helpers</li>
            </ul>
        </div>
        
        <!-- Authentication Section -->
        <div id="loginOverlay" class="overlay">
            <div class="login-container">
                <h2>Login / Sign Up</h2>
                <input type="email" id="loginEmail" placeholder="Email" />
                <input type="password" id="loginPassword" placeholder="Password" />
                <div class="button-group">
                    <button id="loginButton">Login</button>
                    <button id="signupButton">Sign Up</button>
                </div>
                <div id="loginError" class="error"></div>
            </div>
        </div>
        
        <!-- Main Toolbar -->
        <div class="toolbar">
            <button id="exportBtn" onclick="window.exportFlowchartJson()">Export JSON</button>
            <button id="importBtn" onclick="document.getElementById('importFile').click()">Import JSON</button>
            <button id="exportPngBtn" onclick="window.exportFlowchartPng()">Export PNG</button>
            <button id="exportSvgBtn" onclick="window.exportFlowchartSvg()">Export SVG</button>
            <button id="settingsBtn" onclick="window.showSettingsMenu()">Settings</button>
            <button id="logoutBtn">Logout</button>
        </div>
        
        <!-- Hidden file input for import -->
        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="window.importFlowchartJson(event)">
        
        <!-- Graph Container -->
        <div id="graphContainer" class="graph-container"></div>
        
        <!-- Context Menus -->
        <div id="contextMenu" class="context-menu">
            <div id="placeQuestionNode">Question Node</div>
            <div id="placeOptionNode">Option Node</div>
            <div id="placeCalcNode">Calculation Node</div>
            <div id="placeNotesNode">Notes Node</div>
            <div id="placeChecklistNode">Checklist Node</div>
            <div id="placeSubtitleNode">Subtitle Node</div>
            <div id="placeInfoNode">Info Node</div>
            <div id="placeImageNode">Image Node</div>
            <div id="placePdfNode">PDF Node</div>
            <div id="placeAmountNode">Amount Node</div>
            <div id="placeEndNode">End Node</div>
        </div>
        
        <!-- Settings Menu -->
        <div id="settingsMenu" class="settings-menu">
            <h3>Settings</h3>
            <div class="setting-group">
                <label>
                    <input type="checkbox" id="autoSaveCheckbox"> Auto-save
                </label>
                <input type="number" id="autoSaveIntervalInput" placeholder="Auto-save interval (seconds)" min="10" max="300">
            </div>
            <div class="setting-group">
                <label>
                    <input type="checkbox" id="gridSnapCheckbox"> Grid snap
                </label>
                <input type="number" id="gridSizeInput" placeholder="Grid size" min="5" max="100">
            </div>
            <div class="setting-group">
                <label>
                    <input type="checkbox" id="showGridCheckbox"> Show grid
                </label>
            </div>
            <div class="setting-group">
                <label>Theme:</label>
                <select id="themeSelect">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                </select>
            </div>
            <div class="button-group">
                <button id="saveSettingsBtn">Save</button>
                <button id="cancelSettingsBtn">Cancel</button>
                <button id="resetSettingsBtn" onclick="window.resetSettingsToDefault()">Reset to Defaults</button>
            </div>
        </div>
        
        <!-- Color Picker Panel -->
        <div class="color-panel">
            <h3>Color Preferences</h3>
            <div class="color-item">
                <label>Text:</label>
                <button id="colorText">Choose</button>
                <input type="color" id="colorPickerText" value="#000000">
            </div>
            <div class="color-item">
                <label>Checkbox:</label>
                <button id="colorCheckbox">Choose</button>
                <input type="color" id="colorPickerCheckbox" value="#4CAF50">
            </div>
            <div class="color-item">
                <label>Dropdown:</label>
                <button id="colorDropdown">Choose</button>
                <input type="color" id="colorPickerDropdown" value="#2196F3">
            </div>
            <div class="color-item">
                <label>Money:</label>
                <button id="colorMoney">Choose</button>
                <input type="color" id="colorPickerMoney" value="#FF9800">
            </div>
            <div class="color-item">
                <label>Date:</label>
                <button id="colorDate">Choose</button>
                <input type="color" id="colorPickerDate" value="#9C27B0">
            </div>
            <div class="color-item">
                <label>Big Paragraph:</label>
                <button id="colorBigParagraph">Choose</button>
                <input type="color" id="colorPickerBigParagraph" value="#607D8B">
            </div>
            <div class="color-item">
                <label>Text Color:</label>
                <button id="colorTextColor">Choose</button>
                <input type="color" id="colorPickerTextColor" value="#FFFFFF">
            </div>
            <button id="resetColorsBtn">Reset Colors</button>
        </div>
        
        <!-- Search Panel -->
        <div class="search-panel">
            <h3>Search</h3>
            <input type="text" id="searchInput" placeholder="Search nodes...">
            <div id="searchResults"></div>
        </div>
        
        <!-- Footer -->
        <footer>
            <p>Modular Flowchart Creation Tool - Better organized and maintainable code structure</p>
        </footer>
    </div>
    
    <!-- Load JavaScript Modules in Order -->
    <script src="settings.js"></script>
    <script src="auth.js"></script>
    <script src="graph.js"></script>
    <script src="nodes.js"></script>
    <script src="ui.js"></script>
    <script src="exportsvg.js"></script>
    <script src="legend.js"></script>
    <script src="calc.js"></script>
    <script src="context-menus.js"></script>
    <script src="library.js"></script>
    <script src="script.js"></script>
    
    <script>
        // Additional initialization for modular version
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Modular flowchart application loaded successfully!');
            
            // Check if all modules are loaded
            const requiredModules = [
                'initializeGraph',
                'createNode',
                'exportFlowchartJson',
                'showContextMenu',
                'loadSettingsFromLocalStorage',
                'showPropertiesPopup',
                'initializeContextMenusModule'
            ];
            
            const missingModules = requiredModules.filter(module => !window[module]);
            if (missingModules.length > 0) {
                console.warn('Missing modules:', missingModules);
            } else {
                console.log('All required modules loaded successfully');
            }
        });
    </script>
</body>
</html>










<!DOCTYPE html>
<html>
<head>
    <title>Test Alert Logic Fix</title>
</head>
<body>
    <h1>Test Alert Logic Fix</h1>
    <p>This test verifies that alert logic only triggers for the specific question that changed, not for all questions.</p>
    
    <h2>Test Scenario:</h2>
    <ol>
        <li>Select "Yes" for q2 - should show alert "Hello"</li>
        <li>Select "No" for q2 - should show alert "Hello"</li>
        <li>Select "Yes" for q3 - should NOT show any alert</li>
        <li>Select "No" for q3 - should NOT show any alert</li>
    </ol>
    
    <h2>Test JSON:</h2>
    <pre id="testJson">
{
  "sections": [
    {
      "sectionId": 1,
      "sectionName": "Enter Name",
      "questions": [
        {
          "questionId": 1,
          "text": "q1",
          "type": "dropdown",
          "logic": {
            "enabled": false,
            "conditions": []
          },
          "jump": {
            "enabled": false,
            "conditions": []
          },
          "conditionalPDF": {
            "enabled": true,
            "pdfName": "form2.pdf",
            "answer": "No"
          },
          "pdfLogic": {
            "enabled": false,
            "pdfName": "",
            "stripePriceId": "",
            "conditions": []
          },
          "alertLogic": {
            "enabled": false,
            "message": "",
            "conditions": []
          },
          "checklistLogic": {
            "enabled": true,
            "conditions": [
              {
                "prevQuestion": "1",
                "prevAnswer": "Yes",
                "checklistItems": [
                  "Checklist test"
                ]
              }
            ]
          },
          "conditionalAlert": {
            "enabled": false,
            "prevQuestion": "",
            "prevAnswer": "",
            "text": ""
          },
          "subtitle": {
            "enabled": false,
            "text": ""
          },
          "infoBox": {
            "enabled": false,
            "text": ""
          },
          "options": [
            "No",
            "Yes"
          ],
          "labels": [],
          "nameId": "q1",
          "placeholder": "",
          "linking": {
            "enabled": false,
            "targetId": ""
          },
          "image": {
            "url": "",
            "width": 0,
            "height": 0
          }
        },
        {
          "questionId": 2,
          "text": "q2",
          "type": "dropdown",
          "logic": {
            "enabled": true,
            "conditions": [
              {
                "prevQuestion": "1",
                "prevAnswer": "Yes"
              },
              {
                "prevQuestion": "1",
                "prevAnswer": "No"
              }
            ]
          },
          "jump": {
            "enabled": false,
            "conditions": []
          },
          "conditionalPDF": {
            "enabled": false,
            "pdfName": "",
            "answer": "Yes"
          },
          "pdfLogic": {
            "enabled": false,
            "pdfName": "",
            "stripePriceId": "",
            "conditions": []
          },
          "alertLogic": {
            "enabled": true,
            "message": "Hello",
            "conditions": [
              {
                "prevQuestion": "2",
                "prevAnswer": "Yes"
              }
            ]
          },
          "checklistLogic": {
            "enabled": false,
            "conditions": []
          },
          "conditionalAlert": {
            "enabled": false,
            "prevQuestion": "",
            "prevAnswer": "",
            "text": ""
          },
          "subtitle": {
            "enabled": false,
            "text": ""
          },
          "infoBox": {
            "enabled": false,
            "text": ""
          },
          "options": [
            "No",
            "Yes"
          ],
          "labels": [],
          "nameId": "q2",
          "placeholder": "",
          "linking": {
            "enabled": false,
            "targetId": ""
          },
          "image": {
            "url": "",
            "width": 0,
            "height": 0
          }
        },
        {
          "questionId": 3,
          "text": "q3",
          "type": "dropdown",
          "logic": {
            "enabled": true,
            "conditions": [
              {
                "prevQuestion": "2",
                "prevAnswer": "Yes"
              },
              {
                "prevQuestion": "2",
                "prevAnswer": "No"
              }
            ]
          },
          "jump": {
            "enabled": false,
            "conditions": []
          },
          "conditionalPDF": {
            "enabled": false,
            "pdfName": "",
            "answer": "Yes"
          },
          "pdfLogic": {
            "enabled": false,
            "pdfName": "",
            "stripePriceId": "",
            "conditions": []
          },
          "alertLogic": {
            "enabled": false,
            "message": "",
            "conditions": []
          },
          "checklistLogic": {
            "enabled": false,
            "conditions": []
          },
          "conditionalAlert": {
            "enabled": false,
            "prevQuestion": "",
            "prevAnswer": "",
            "text": ""
          },
          "subtitle": {
            "enabled": false,
            "text": ""
          },
          "infoBox": {
            "enabled": false,
            "text": ""
          },
          "options": [
            "No",
            "Yes"
          ],
          "labels": [],
          "nameId": "q3",
          "placeholder": "",
          "linking": {
            "enabled": false,
            "targetId": ""
          },
          "image": {
            "url": "",
            "width": 0,
            "height": 0
          }
        }
      ]
    }
  ],
  "groups": [],
  "hiddenFields": [],
  "sectionCounter": 2,
  "questionCounter": 1,
  "hiddenFieldCounter": 1,
  "groupCounter": 1,
  "defaultPDFName": "",
  "pdfOutputName": "",
  "stripePriceId": "",
  "additionalPDFs": [],
  "checklistItems": []
}
    </pre>
    
    <h2>Instructions:</h2>
    <ol>
        <li>Open the FormWiz GUI in your browser (http://localhost:8000/gui.html)</li>
        <li>Copy the JSON above</li>
        <li>Click "Import JSON" and paste the JSON</li>
        <li>Generate the HTML form</li>
        <li>Test the alert logic behavior as described above</li>
    </ol>
    
    <h2>Expected Result:</h2>
    <p>After the fix, alerts should only appear when changing q2 (which has alert logic configured), and should NOT appear when changing q3 (which has no alert logic).</p>
</body>
</html>

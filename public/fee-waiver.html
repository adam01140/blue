<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waive Court Fees Form</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
		
		.lawyer-info, .job-info, .income-info, .previous-request-info, .monthly-income-info {
        display: none;
    }
		
		 .checkbox-label, noneApplyCheckbox {
        font-size: 18px; /* Increase font size as needed */
        display: block;
        text-align: left;
        margin: 0 auto;
        cursor: pointer; /* Changes cursor to pointer when hovering over the label */
    }
	
	
        body {
            font-family: 'Montserrat', sans-serif;
            color: #333;
            background-color: #f4f4f4;
        }
        header {
            background-color: #2c3e50;
            padding: 40px; /* Increase padding to make the header taller */
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        header img {
            position: absolute;
            left: 20px; /* Position the logo on the left */
            cursor: pointer;
        }
        nav {
            display: flex;
            justify-content: center; /* Center the navigation links */
        }
        nav a {
            margin: 0 15px;
            color: #ffffff; /* Set default color to white */
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease; /* Smooth transition for color change */
        }
        nav a:hover {
            color: #2980b9; /* Change color to light blue on hover */
        }
        footer {
            text-align: center;
            padding: 20px;
            background-color: #2c3e50;
            color: #EBE7D9;
            margin-top: 20px;
        }

        /* Existing styles from your form page */
        p {
            font-size: 23px; /* Change this value as needed */
        }

       .nav-buttons-container {

    transform: translateX(-50%); /* Adjust for centering */
    display: flex;
    justify-content: center; /* Center the buttons next to each other */
  
}

.back-button,
.next-button {
    margin: 0 5px; /* Adjusts spacing between buttons */
}

#deductions input[type="text"] {
        height: 15px; /* Adjust this value to decrease the height */
        padding: 4px 10px; /* Adjust padding to better fit the smaller height */
        font-size: 10px; /* Optional: adjust font size to match the new height */
    }

    #deductions {
        border: 4px solid lightblue;
        border-radius: 10px;
        padding: 20px;
        margin: 10px;
        background-color: #ffffff;
        width: 80%;
        height: 100%;
        overflow-y: auto;
        overflow-x: hidden;
    }

      

        select {
            text-align: center;
            width: 200px;
            height: 50px;
            background-color: #2c3e50;
            color: white;
            font-size: 16px;
            border-radius: 40px;
            padding-left: 10px;
            border: 1px solid #3f77b8;
            cursor: pointer;
        }

        input[type="text"], input[type="email"] {
            text-align: center;
            width: 170px;
            height: 30px;
            font-size: 16px;
            border-radius: 10px;
            padding-left: 10px;
            border: 1px solid #2c3e50;
        }

        option {
            background-color: white;
            color: black;
        }

        .container {
            display: flex;
            justify-content: space-around;
            align-items: start;
            margin-top: 20px;
        }

        input::placeholder {
            font-size: 17.5px; /* Adjust this value as needed */
            color: #999; /* Light grey color, adjust as needed */
        }

        .income-field-container {
            margin-bottom: 15px; /* Space between each pair of input fields */
        }

        .income-source, .income-amount {
            width: 45%; /* Adjust width to fit in the container */
            display: inline-block; /* Align inputs horizontally */
            margin-right: 10px; /* Space between the inputs */
        }

        .income-amount {
            margin-right: 0; /* No right margin on the amount field */
        }

        #navigation {
            display: flex;
            justify-content: space-between; /* Position buttons on the left and right */
            width: 100%;
            margin-top: 20px;
        }

      

        #benifits {
        border: 4px solid lightblue;
		border-color: #2c3e50;
        border-radius: 10px;
        padding: 20px;
		padding-right: 100px;
		padding-left: 100px;
        margin: 0px;
        background-color: #ffffff;
        width: fit-content;
        height: 100%;
        overflow-y: auto;
        overflow-x: hidden;
    }


        #deductions {
            width: 80%;
            height: 100%;
        }

        #pdfPreview {
            width: 100%;
            height: 750px;
            box-sizing: border-box;
            display: none; /* Initially hidden */
        }

        #pdfFrame {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Rest of your existing styles from the original form page */
        .cash-savings-container, .vehicle-field-container, .estate-field-container, .bank-field-container, .personal-field-container, .payment-field-container, .dependency-details {
            display: flex;
            justify-content: center; /* Aligns children at the start of the container */
            margin-bottom: 10px; /* Space between rows */
        }

  

        .button {
            font-size: 1.2em;
            font-weight: 600;
            padding: 20px 40px;
            border: none;
            border-radius: 8px;
            background-color: #2c3e50;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .button:hover {
            background-color: #005bb5;
        }


		.done-button {
            font-size: 20px;
            background-color: #2c3e50; /* Button color */
            color: white;
            border: none;
            border-radius: 25px; /* Less rounded corners */
            padding: 10px 15px; /* Smaller padding to make the buttons less wide */
            cursor: pointer;
            height: 50px;
            width: auto; /* Adjusts to content width */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
		
		

#box {
    border: 4px solid lightblue;
    border-color: #2c3e50;
    border-radius: 10px;
    padding: 20px;
    padding-bottom: 70px; /* Increase bottom padding to make space for buttons */
    margin: 50px;
    background-color: #ffffff;
    width: auto;
    height: auto; /* Allow the div to grow with its content */
    min-width: 80vw;
    min-height: 65vh;
    position: relative;
}

.next-button, .back-button {
    position: absolute;
    bottom: 20px; /* Distance from the bottom of the .box */
    font-size: 20px;
    background-color: #2c3e50; /* Button color */
    color: white;
    border: none;
    border-radius: 25px; /* Less rounded corners */
    padding: 10px 15px; /* Smaller padding to make the buttons less wide */
    cursor: pointer;
    height: 50px;
    width: auto; /* Adjusts to content width */
    transition: background-color 0.3s;
}

.back-button {
    left: 45%; /* Position the back button slightly left */
    transform: translateX(-50%);
}

.next-button {
    left: 55%; /* Position the next button slightly right */
    transform: translateX(-50%);
}

.info-icon {
    display: inline-block;
    width: 15px;
    height: 15px;
    background-color: grey;
    color: white;
    text-align: center;
    border-radius: 50%;
    font-size: 12px;
    line-height: 15px;
    cursor: pointer;
    margin-left: 10px;
    position: relative;
}

.info-icon:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 210%; /* Position to the right of the icon */
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.75);
    color: white;
    padding: 5px;
    border-radius: 5px;
    white-space: normal; /* Allows text to wrap */
    font-size: 12px;
    z-index: 100;
    opacity: 1;
    visibility: visible;
    width: 450px; /* Fixed width for the tooltip */
    max-width: 450px; /* Ensure tooltip does not exceed this width */
    box-sizing: border-box; /* Ensure padding is included in width */
}

.info-icon:hover::before {
    content: '';
    position: absolute;
    left: 100%; /* Position arrow directly on the right edge */
    top: 50%;
    transform: translateY(-50%);
    border-width: 5px;
    border-style: solid;
    border-color: transparent transparent transparent rgba(0, 0, 0, 0.75);
    z-index: 100;
    opacity: 1;
    visibility: visible;
}




footer {
            text-align: center;
            padding: 20px;
            background-color: #2c3e50;
            color: #EBE7D9;
            margin-top: 20px;
        }


        .next-button:hover, .back-button:hover {
            background-color: #005bb5; /* Darker blue on hover */
        }

        .next-button:active, .back-button:active {
            background-color: #004080; /* Even darker blue when active */
        }

        /* Styles specific to devices with a viewport width of 600px or less (typically smartphones) */
        @media (max-width: 1000px) {
            select {
                text-align-last: center; /* Align text in select for Android */
                -moz-text-align-last: center; /* For Firefox versions */
                text-align: center; /* For iOS and standard browsers */
                padding-right: 30px; /* Adjust this value as needed */
            }
        }
    </style>
	
	
</head>
<body>

    <header>
        <img src="logo.png" alt="FormWiz Logo" width="130" height="80" onclick="location.href='index.html';">
        <nav>
            <a href="index.html">Home</a>
            <a href="forms.html">Forms</a>
            <a href="contact.html">Contact Us</a>
        </nav>
    </header>
<div class="container2">
    <div id="questions">

         
            <div id="question1" class="questionBox">
                <center>
             
                        <div id="box" style="line-height: 0.4;">
                            <h1 style="color: #2c3e50;"><u>Demographics</u></h1><br><br>

                            <form id="userForm">
                                <p><strong>What's your full name?</strong>
								<span class="info-icon" data-tooltip="Please enter your full legal name exactly as it appears on your passport. This should include your first name, middle name(s), and last name, ensuring that all spelling and punctuation match your legal documents.">i</span>
								</p>
								<input type="text" id="PetitionerName1[0]" name="PetitionerName1[0]" placeholder="Full name" required>

								
								<br><br>
								<label class="checkbox-label"><input type="checkbox" name="food_stamps" value="Yes"> Food Stamps</label>
								
								
                                <p><strong>What's your email? <br> <br><br> </strong> (Email will be linked to your account for future forms)</strong></p>
                                <input type="email" id="email" name="email" placeholder="Email" required>
                                <br><br>
                            </form>
                            <p><strong>What's your street address?</strong></p>
                            <input type="text" id="Street" name="Street" placeholder="Street">
                            <input type="text" id="PetitionerCity[0]" name="PetitionerCity[0]" placeholder="City" required>
                            <br><br>
                            <input type="text" id="County" name="County" placeholder="County" required>
                            <input type="text" id="PetitionerState[0]" name="PetitionerState[0]" placeholder="State" required>
                            <br><br>
                            <input type="text" id="PetitionerZip[0]" name="PetitionerZip[0]" placeholder="Zip" required>
                            <br><br>
                            <p><strong>What's your phone number?</strong></p>
                            <input type="text" id="PetitionerTel[0]" name="PetitionerTel[0]" placeholder="Phone Number" required>
                            <br><br><br><br>
						
						
						 <button class="done-button" type="button" onclick="editPDF()"> Download From </h1></button>
	<br><br>
	<button class="done-button" type="button" onclick="restart()"> Review Answers </h1></button>
	<br><br>
	
	
                        </div>
						
	
                    </center>
                </center>
            </div>


        
   
        
    </div>


</div>

	
	
	
	
	
	
	
	
<div id="pdfPreview" style="display:none;">
    <iframe id="pdfFrame" style = "display:none"></iframe>
</div>	
<input type="text" id="current_date" name="current_date" placeholder="current_date" style="display:none">	
<script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
<script>

let uploadedPdfFile = null;

function downloadPDF() {
    var iframe = document.getElementById('pdfFrame');
    var url = iframe.src;
    var downloadLink = document.createElement("a");
    downloadLink.href = url;
    downloadLink.download = "ModifiedDocument.pdf";
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
}

function loadDefaultPDF() {
    const defaultUrl = 'http://localhost:3000/form.pdf';
    fetch(defaultUrl)
        .then(response => response.blob())
        .then(blob => {
            uploadedPdfFile = blob;
            displayPDF(blob);
        })
        .catch(error => {
            console.error('Error loading default PDF:', error);
           // alert('Error loading default PDF: ' + error.message);
        });
}

function displayPDF(pdfBlob) {
    var url = URL.createObjectURL(pdfBlob);
    document.getElementById('pdfFrame').src = url;
    //document.getElementById('pdfPreview').style.display = 'block';
}


var formData = new FormData();

//edit pdf code
async function editPDF() {
    
	
	formData = new FormData(); // Reset formData for fresh use each time the function is called.

    if (!uploadedPdfFile) {
        //alert('No PDF file is loaded for editing. Please upload the file again.');
        return;
    }

    // Collect inputs from the form
    const inputs = document.querySelectorAll('#questions input, #questions select');
    inputs.forEach(input => {
        if (input.type === 'checkbox') {
            formData.append(input.name, input.checked ? 'Yes' : 'No');
        } else {
            formData.append(input.name, input.value);
        }
    });
	
	
	
	
    // Append the PDF file to formData
    formData.append('pdf', uploadedPdfFile);

    // Debugging: Log the form data
    console.log('FormData contents:');
    for (var pair of formData.entries()) {
        console.log(`${pair[0]}: ${pair[1]}`);
    }

    // Send the formData to the server
    fetch('/edit_pdf', {
        method: 'POST',
        body: formData,
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`Network response was not ok: ${response.statusText}`);
        }
        return response.blob();
    })
    .then(blob => {
        var url = window.URL.createObjectURL(blob);
        document.getElementById('pdfFrame').src = url;
        //document.getElementById('pdfPreview').style.display = 'block';
        downloadPDF();
    })
    .catch(error => {
        console.error('Error updating PDF:', error);
        //alert('Error updating PDF: ' + error.message);
    });
}


function setCurrentDate() {
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();
    today = yyyy + '-' + mm + '-' + dd;
    document.getElementById('current_date').value = today;
}


window.onload = function() {
    loadDefaultPDF();
    setCurrentDate();
};
</script>

</div>
</center>
</body>
</html>
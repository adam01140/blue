<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File or Respond to Small Claims | SC-100, SC-120, SC-500 | FormStar</title>
    <meta name="description" content="File or respond to small claims fast. Start SC-100 (plaintiff), SC-120 (defendant counterclaim), or SC-500. Check county eligibility, fees, and steps to serve and prepare for court." />
    <link rel="canonical" href="https://www.formstar.com/small-claims" />
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How do I file a small claims case?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Choose the right form (SC-100 for plaintiffs, SC-120 for counterclaims), confirm county eligibility, complete the form, pay the filing fee or request a fee waiver, serve the defendant properly, and attend the hearing with your evidence."
          }
        },
        {
          "@type": "Question",
          "name": "What form do I use to counter-sue in small claims?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Use SC-120 (Defendant's Claim and Order to Go to Small Claims Court) to file a counterclaim when a claim has been filed against you."
          }
        },
        {
          "@type": "Question",
          "name": "Are small claims forms different by county?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The core forms are statewide, but availability and filing rules can vary by county. Use the zip lookup to confirm your county is supported and review local filing, service, and fee requirements."
          }
        },
        {
          "@type": "Question",
          "name": "Can I get a fee waiver for small claims?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "If you meet income or hardship criteria, you can request a fee waiver when filing. Complete the fee waiver form and submit it with your small claims paperwork."
          }
        }
      ]
    }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            font-family: 'Montserrat', sans-serif;
            color: #333;
            background-color: #eaf1f8;
            zoom: 0.90;
            min-height: 100vh;
        }
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            background-color: #2c3e50;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }
        header img {
            cursor: pointer;
        }
        nav.desktop-nav {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 38px;
            z-index: 2;
        }
        nav.desktop-nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.18em;
            letter-spacing: 0.02em;
            padding: 2px 8px;
            transition: color 0.2s, background 0.2s, box-shadow 0.2s;
            border-radius: 6px;
            display: flex;
            align-items: center;
        }
        nav.desktop-nav a:hover {
            color: #ff7043;
            background: rgba(255,255,255,0.08);
            box-shadow: 0 2px 8px rgba(44,62,80,0.10);
        }
        .nav-chevron {
            display: inline-block;
            margin-left: 6px;
            width: 14px;
            height: 14px;
            vertical-align: middle;
        }
        .nav-chevron svg {
            display: block;
            width: 100%;
            height: 100%;
        }
        .header-actions {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-left: auto;
        }
        .sign-in-btn {
            background: #fff;
            color: #222;
            font-weight: 700;
            font-size: 1.08em;
            border: none;
            border-radius: 22px;
            padding: 8px 28px;
            margin-left: 18px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(44,62,80,0.10);
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
            text-decoration: none;
            outline: none;
        }
        .sign-in-btn:hover {
            background: #f4f4f4;
            color: #2980b9;
            box-shadow: 0 4px 16px rgba(44,62,80,0.13);
        }
        .btn {
            background-color: #2980b9;
            color: #ffffff;
            padding: 12px 24px;
            font-size: 1.1em;
            text-decoration: none;
            font-weight: bold;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            flex-direction: column;
            width: auto;
            max-width: 200px;
        }
        .tiny-click-here {
            font-size: 0.8em;
            color: #d6e6f7;
            font-weight: 400;
            margin-top: 2px;
            letter-spacing: 0.5px;
        }
        .btn:hover {
            background-color: #1c598a;
        }
        footer {
            text-align: center;
            padding: 20px;
            background-color: #374656;
            color: white;
        }
        .nav-dropdown-wrapper {
            position: relative;
            display: inline-block;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            left: 0;
            top: 38px;
            background: #fff;
            min-width: 210px;
            box-shadow: 0 4px 24px rgba(44,62,80,0.13);
            border-radius: 10px;
            z-index: 10;
            padding: 12px 0;
            flex-direction: column;
            gap: 0;
        }
        /* Ensure dropdown items stay visible on white background (match forms.html) */
        .dropdown-menu a {
            color: #222 !important;
            padding: 12px 28px !important;
            text-decoration: none !important;
            display: block !important;
            font-weight: 600 !important;
            font-size: 1.08em !important;
            border-radius: 0 !important;
            transition: background 0.18s, color 0.18s !important;
        }
        .dropdown-menu a:link,
        .dropdown-menu a:visited,
        .dropdown-menu a:active {
            color: #222 !important;
        }
        .dropdown-menu a:hover {
            background: #eaf1f8 !important;
            color: #2980b9 !important;
        }
        .dropdown-menu a:hover {
            background: #eaf1f8;
            color: #2980b9;
        }
        .nav-dropdown-wrapper.open .dropdown-menu {
            display: flex;
            animation: dropdownFadeIn 0.22s cubic-bezier(0.4,0,0.2,1);
        }
        @keyframes dropdownFadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .forms-chevron {
            transition: transform 0.28s cubic-bezier(0.4,0,0.2,1);
        }
        .nav-dropdown-wrapper.open .forms-chevron {
            transform: rotate(-90deg);
        }
        
        /* Mobile hamburger menu styles */
        .mobile-menu-toggle {
            display: none !important;
            flex-direction: column !important;
            justify-content: space-around !important;
            width: 30px !important;
            height: 30px !important;
            background: transparent !important;
            border: none !important;
            cursor: pointer !important;
            padding: 0 !important;
            z-index: 1001 !important;
            position: absolute !important;
            left: 15px !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
        }
        
        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: #fff;
            border-radius: 3px;
            transition: all 0.3s ease;
            transform-origin: 1px;
        }
        
        .mobile-menu-toggle.active span:first-child {
            transform: rotate(45deg);
        }
        
        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .mobile-menu-toggle.active span:last-child {
            transform: rotate(-45deg);
        }
        
        .desktop-nav {
            display: flex;
        }
        
        .mobile-nav {
            display: none !important;
            position: fixed !important;
            top: 0 !important;
            left: -100% !important;
            width: 85% !important;
            max-width: 300px !important;
            height: 100vh !important;
            background: #2c3e50 !important;
            flex-direction: column !important;
            padding: 140px 20px 20px 20px !important;
            transition: left 0.3s ease !important;
            z-index: 1000 !important;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3) !important;
            overflow-y: auto !important;
            -webkit-overflow-scrolling: touch !important;
        }
        
        .mobile-nav.active {
            left: 0 !important;
            display: flex !important;
        }
        
        .mobile-nav a {
            color: #fff !important;
            text-decoration: none !important;
            padding: 12px 0 12px 25px !important;
            border-bottom: 1px solid #34495e !important;
            font-size: 1.1em !important;
            font-weight: 600 !important;
            line-height: 1.1 !important;
            min-height: 50px !important;
            display: flex !important;
            align-items: center !important;
            margin-top: 0 !important;
        }
        
        .mobile-nav-section {
            border-bottom: 1px solid #34495e;
        }
        
        .mobile-nav-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #fff;
            text-decoration: none;
            padding: 15px 0;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
        }
        
        .mobile-nav-submenu {
            display: none;
            padding-left: 20px;
        }
        
        .mobile-nav-submenu.active {
            display: block;
        }
        
        .mobile-nav-submenu a {
            padding: 15px 0;
            font-size: 1em;
            border-bottom: 1px solid #34495e;
            line-height: 1.1;
            min-height: 45px;
            display: flex;
            align-items: center;
        }
        
        .mobile-nav-logout,
        .mobile-nav-logout a,
        #mobile-logout-btn {
            color: #ff7043 !important;
            font-weight: 700 !important;
        }
        
        .mobile-nav-toggle span {
            transition: transform 0.3s ease;
        }
        
        .mobile-nav-toggle.active span {
            transform: rotate(180deg);
        }
        
        /* Mobile overlay for menu */
        .mobile-nav-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .mobile-nav-overlay.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            html { font-size: 14px !important; }
            body { overflow-x: hidden; }
            .mobile-menu-toggle {
                display: flex !important;
                position: absolute !important;
                left: 15px !important;
                top: 50% !important;
                transform: translateY(-50%) !important;
                z-index: 1001 !important;
            }
            .desktop-nav { display: none !important; }
            nav:not(.mobile-nav) { display: none !important; }
            .mobile-nav { display: none !important; }
            .mobile-nav.active { left: 0 !important; display: flex !important; }
            header {
                padding: 16px 15px;
                min-height: 80px;
                flex-wrap: wrap;
                gap: 12px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                position: relative;
            }
            header img {
                width: 119px;
                height: 73px;
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
            }
            .header-actions {
                gap: 10px;
                margin-left: auto;
                margin-right: 15px;
            }
            .sign-in-btn {
                font-size: 0.9em;
                padding: 6px 20px;
                margin-left: 0;
            }
            #logout-btn { display: none !important; }
            #cart-icon-link .cart-circle { width: 55px !important; height: 55px !important; }
            #cart-icon-link svg { width: 30px !important; height: 30px !important; }

            /* Content spacing adjustments remain */
            .guided-module {
                margin: 0 20px !important;
                padding: 25px 20px !important;
                max-width: calc(100% - 100px) !important;
            }
            .forms-container {
                margin: 24px 20px 0 20px !important;
                padding: 25px 20px !important;
                max-width: calc(100% - 100px) !important;
            }
            .forms-container h2 {
                font-size: 1.5em !important;
                margin-bottom: 20px !important;
            }
            .forms-container > div[style*="display:grid"],
            .forms-container div[style*="grid-template-columns"] {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 15px !important;
                width: 100% !important;
            }
            .freeform-card {
                padding: 20px 15px !important;
                min-width: auto !important;
            }
            .freeform-card svg {
                width: 70px !important;
                height: 70px !important;
                margin-bottom: 12px !important;
            }
            .freeform-card > div:nth-child(2) { font-size: 1em !important; }
            .freeform-card > div:nth-child(3) { font-size: 0.9em !important; }
            .freeform-card .btn {
                padding: 8px 20px !important;
                font-size: 0.95em !important;
                max-width: 140px !important;
            }
            /* Banner section */
            main > section:first-child {
                margin: 0 20px 24px 20px !important;
                padding: 25px 20px !important;
                max-width: calc(100% - 100px) !important;
                border-radius: 20px !important;
                margin-left: 30px !important;
                margin-right: 17px !important;
            }
            main > section:first-child > div {
                flex-direction: column !important;
                gap: 20px !important;
                width: 100% !important;
            }
            main > section:first-child h1 {
                font-size: 1.8em !important;
                text-align: center !important;
            }
            main > section:first-child p {
                font-size: 1.1em !important;
                text-align: center !important;
            }
            /* Footer mobile */
            .pro-footer-col.nav-col { display: none !important; }
            .pro-footer {
                gap: 20px !important;
                padding: 30px 20px 15px 20px !important;
                flex-direction: row !important;
            }
            .pro-footer-col.address-col {
                padding-right: 0 !important;
                border-right: 1.5px solid #2c7a7d !important;
            }
            .pro-footer-col.company-col {
                padding-left: 20px !important;
                border-right: none !important;
            }
            .pro-footer-contact {
                display: flex !important;
                flex-direction: column !important;
                gap: 8px !important;
            }
            .pro-footer-contact a { margin-right: 0 !important; }
            footer {
                padding: 20px !important;
                padding-bottom: 20px !important;
                margin-bottom: 0 !important;
            }
            html, body { margin-bottom: 0 !important; padding-bottom: 0 !important; }
            .pro-footer, footer { margin-bottom: 0 !important; }
        }
        
        main { flex: 1; }
        
        /* Mobile Menu Toggle (Hamburger Button) */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 30px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: #fff;
            border-radius: 3px;
            transition: all 0.3s ease;
            transform-origin: 1px;
        }
        
        .mobile-menu-toggle.active span:first-child {
            transform: rotate(45deg);
        }
        
        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .mobile-menu-toggle.active span:last-child {
            transform: rotate(-45deg);
        }
        
        .desktop-nav {
            display: flex;
        }
        
        /* Mobile Navigation Menu */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: -100%;
            width: 85%;
            max-width: 300px;
            height: 100vh;
            background: #2c3e50;
            flex-direction: column;
            padding: 140px 20px 20px 20px;
            transition: left 0.3s ease;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .mobile-nav.active {
            left: 0;
            display: flex;
        }
        
        .mobile-nav a {
            color: #fff;
            text-decoration: none;
            padding: 12px 0 12px 25px;
            border-bottom: 1px solid #34495e;
            font-size: 1.1em;
            font-weight: 600;
            line-height: 1.1;
            min-height: 50px;
            display: flex;
            align-items: center;
            margin-top: 0;
        }
        
        .mobile-nav-section {
            border-bottom: 1px solid #34495e;
        }
        
        .mobile-nav-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #fff;
            text-decoration: none;
            padding: 12px 0 12px 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
        }
        
        .mobile-nav-submenu {
            display: none;
            padding-left: 20px;
        }
        
        .mobile-nav-submenu.active {
            display: block;
        }
        
        .mobile-nav-submenu a {
            padding: 10px 0 10px 45px;
            font-size: 1em;
            border-bottom: 1px solid #34495e;
            line-height: 1.1;
            min-height: 45px;
            display: flex;
            align-items: center;
        }
        
        .mobile-nav-logout {
            color: #ff7043 !important;
            font-weight: 700;
        }
        
        .mobile-nav-toggle span {
            transition: transform 0.3s ease;
        }
        
        .mobile-nav-toggle.active span {
            transform: rotate(180deg);
        }
        
        /* Mobile Overlay */
        .mobile-nav-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .mobile-nav-overlay.active {
            display: block;
        }
        
        .pro-footer {
            background: #2c3e50 !important;
            color: #f3f7f8 !important;
            display: flex !important;
            justify-content: center !important;
            align-items: flex-start !important;
            gap: 60px !important;
            padding: 48px 10vw 20px 10vw !important;
            border-top: 2px solid #2c3e50 !important;
            font-family: 'Montserrat', sans-serif !important;
            font-size: 1.18em !important;
            margin-top: 0 !important;
            flex-direction: row !important;
        }
        .pro-footer-col {
            flex: 1 1 320px !important;
            min-width: 220px !important;
            max-width: 420px !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 18px !important;
        }
        .address-col {
            border-right: 1.5px solid #2c7a7d !important;
            padding-right: 48px !important;
            align-items: flex-start !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            padding-left: 0 !important;
        }
        .nav-col {
            align-items: flex-start !important;
            padding-left: 32px !important;
            padding-right: 32px !important;
            border-right: 1.5px solid #2c7a7d !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
        }
        .company-col {
            align-items: flex-start !important;
            padding-left: 48px !important;
            padding-right: 0 !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
        }
        .pro-footer-title {
            font-weight: 700 !important;
            font-size: 1.25em !important;
            margin-bottom: 6px !important;
            color: #fff !important;
            letter-spacing: 0.02em !important;
        }
        .company-title {
            margin-top: 8px !important;
            margin-bottom: 0 !important;
        }
        .pro-footer-contact a {
            color: #b6e2e6 !important;
            text-decoration: underline !important;
            font-weight: 500 !important;
            margin-right: 18px !important;
            transition: color 0.2s !important;
        }
        .pro-footer-contact a:hover, .pro-footer-col.nav-col a:hover {
            color: #ff7043 !important;
        }
        .pro-footer-logo {
            margin-bottom: 8px !important;
        }
        .pro-footer-desc {
            color: #e0e6ea !important;
            font-size: 1em !important;
            margin-top: 0 !important;
            line-height: 1.5 !important;
        }
        .pro-footer-col.nav-col a {
            color: #b6e2e6 !important;
            text-decoration: none !important;
            font-weight: 500 !important;
            margin-bottom: 6px !important;
            transition: color 0.2s !important;
            font-size: 1em !important;
        }
        .pro-footer-col.nav-col a:not(:last-child) {
            margin-bottom: 8px !important;
        }
        @media (max-width: 900px) and (min-width: 769px) {
            .pro-footer {
                flex-direction: row !important;
                gap: 60px !important;
                padding: 48px 10vw 20px 10vw !important;
            }
            .address-col, .company-col, .nav-col {
                border-right: 1.5px solid #2c7a7d !important;
                padding-right: 48px !important;
                padding-left: 48px !important;
            }
            .address-col {
                padding-right: 48px !important;
                padding-left: 0 !important;
            }
            .nav-col {
                padding-left: 32px !important;
                padding-right: 32px !important;
            }
            .company-col {
                padding-left: 48px !important;
                padding-right: 0 !important;
            }
        }
        .pro-footer, footer {
            flex-shrink: 0 !important;
        }
        footer {
            text-align: center !important;
            padding: 20px !important;
            background-color: #374656 !important;
            color: white !important;
        }
        .forms-container {
            width: 100%;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(44,62,80,0.08);
            padding: 40px;
        }

        .freeform-card {
            background: #fff;
            border: 2px solid #b8dce8;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(44,62,80,0.08);
            padding: 32px 28px 28px 28px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: box-shadow 0.22s cubic-bezier(0.4,0,0.2,1), transform 0.22s cubic-bezier(0.4,0,0.2,1);
            cursor: pointer;
        }
        .freeform-card:hover {
            box-shadow: 0 8px 32px rgba(44,62,80,0.18);
            transform: translateY(-6px) scale(1.035);
            border: 1.5px solid #2980b9;
        }
        .freeform-card img {
            transition: transform 0.22s cubic-bezier(0.4,0,0.2,1);
        }
        .freeform-card:hover img {
            transform: scale(1.08) rotate(-2deg);
        }
        .freeform-card .btn {
            transition: background 0.18s, color 0.18s, box-shadow 0.18s;
        }
        .freeform-card:hover .btn {
            background: #1c598a;
            color: #fff;
            box-shadow: 0 2px 12px rgba(44,62,80,0.13);
        }
        .cart-signup-btn:hover {
            background: #1c598a;
        }
        @media (max-width: 480px) {
            .cart-side-menu {
                width: 90% !important;
                max-width: 380px !important;
                right: -90% !important;
            }
            .cart-content {
                padding: 20px;
            }
            .cart-message {
                font-size: 1.1em;
            }
        }
        #cart-icon-link .cart-circle {
            width: 54px !important;
            height: 54px !important;
            background: #2980b9;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(44,62,80,0.10);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        #cart-icon {
            width: 32px !important;
            height: 32px !important;
            display: block;
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .cart-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .cart-side-menu {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: #fff;
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
            z-index: 10000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .cart-side-menu.active {
            right: 0;
        }
        .cart-header {
            background: #2c3e50;
            color: #fff;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-header h2 {
            margin: 0;
            font-size: 1.5em;
            font-weight: 700;
        }
        .cart-close-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.5em;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }
        .cart-close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .cart-content {
            flex: 1;
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .cart-icon-large {
            font-size: 4em;
            margin-bottom: 32px;
            color: #bdc3c7;
        }
        .cart-items-list {
            width: 100%;
            max-width: 320px;
            margin: 0 auto 18px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
        }
        .cart-item {
            background: #f8faff;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(44,62,80,0.08);
            padding: 18px 18px 14px 18px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0;
            transition: box-shadow 0.18s, background 0.18s;
        }
        .cart-item-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
            align-items: flex-start;
        }
        .cart-item-title {
            font-weight: 700;
            color: #22334a;
            font-size: 1.13em;
            margin-bottom: 2px;
        }
        .cart-item-price {
            color: #38d39f;
            font-weight: 700;
            font-size: 1.08em;
        }
        .remove-item {
            background: #ff5a5f;
            color: #fff;
            border: none;
            padding: 7px 13px 7px 11px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background 0.18s, box-shadow 0.18s;
            box-shadow: 0 2px 8px rgba(255,90,95,0.10);
        }
        .remove-item:hover {
            background: #d32f2f;
        }
        .remove-item svg {
            margin-right: 4px;
        }
        .cart-summary {
            margin-top: 18px;
            background: linear-gradient(90deg, #38d39f 0%, #4f8cff 100%);
            color: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(44,62,80,0.10);
            padding: 24px 0 16px 0;
            text-align: center;
            width: 100%;
            max-width: 320px;
        }
        .summary-label {
            font-size: 1.18em;
            font-weight: 600;
            letter-spacing: 0.01em;
        }
        .total-amount {
            font-size: 2.1em;
            font-weight: 800;
            margin: 10px 0 0 0;
            letter-spacing: 0.01em;
        }
        .cart-checkout-btn {
            background: linear-gradient(90deg, #2980b9 0%, #38d39f 100%);
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 16px 0;
            font-size: 1.18em;
            font-weight: 700;
            cursor: pointer;
            margin: 24px auto 0 auto;
            width: 100%;
            max-width: 220px;
            box-shadow: 0 2px 8px rgba(44,62,80,0.10);
            transition: background 0.18s, box-shadow 0.18s, transform 0.18s;
            display: block;
        }
        .cart-checkout-btn:hover {
            background: linear-gradient(90deg, #38d39f 0%, #2980b9 100%);
            transform: translateY(-2px) scale(1.03);
        }
        .cart-message {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
            line-height: 1.4;
        }
        .cart-description {
            font-size: 1em;
            color: #7f8c8d;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        .cart-signup-btn {
            background: #2980b9;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        .cart-signup-btn:hover {
            background: #1c598a;
        }
        @media (max-width: 480px) {
            .cart-side-menu {
                width: 100%;
                right: -100%;
            }
            .cart-content {
                padding: 20px;
            }
            .cart-message {
                font-size: 1.1em;
            }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow: auto;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .close-modal {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 28px;
            cursor: pointer;
            color: #7f8c8d;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #e74c3c;
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9em;
            color: #4a5568;
            text-align: left;
        }

        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        .form-group input:focus, 
        .form-group select:focus {
            outline: none;
            border-color: #2980b9;
            box-shadow: 0 0 0 3px rgba(41, 128, 185, 0.1);
        }

        .btn {
            width: 100%;
            padding: 14px;
            background-color: #2980b9;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 1em;
            margin-top: 10px;
        }

        .btn:hover {
            background-color: #1c598a;
        }

        .error-message {
            color: #e74c3c;
            margin-top: 10px;
            text-align: center;
            font-size: 0.9em;
            font-weight: 500;
        }

        /* County Selection Modal Styles */
        #county-modal .modal-content {
            text-align: center;
            max-width: 500px;
        }
        #county-modal h2 {
            color: #2c3e50;
            margin-bottom: 20px;
        }
        #county-modal p {
            font-size: 1.1em;
            margin: 20px 0;
            line-height: 1.5;
            color: #34495e;
        }
        #county-modal .btn {
            width: auto;
            padding: 12px 30px;
            margin: 0 10px;
            font-weight: 600;
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }
        #county-modal-cancel {
            background-color: #95a5a6;
        }
        #county-modal-cancel:hover {
            background-color: #7f8c8d;
        }
        #county-modal-submit {
            background-color: #2980b9;
        }
        #county-modal-submit:hover {
            background-color: #1c598a;
        }

        /* Defendant Modal Styles */
        #defendant-modal .modal-content {
            text-align: center;
            max-width: 500px;
        }
        #defendant-modal h2 {
            color: #2c3e50;
            margin-bottom: 20px;
        }
        #defendant-modal p {
            font-size: 1.1em;
            margin: 20px 0;
            line-height: 1.5;
            color: #34495e;
        }
        #defendant-modal .btn {
            width: auto;
            padding: 12px 30px;
            margin: 0 10px;
            font-weight: 600;
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }
        #defendant-modal-cancel {
            background-color: #95a5a6;
        }
        #defendant-modal-cancel:hover {
            background-color: #7f8c8d;
        }
        #defendant-modal-submit {
            background-color: #2980b9;
        }
        #defendant-modal-submit:hover {
            background-color: #1c598a;
        }

        /* Guided Module Styles */
        .guided-module {
            width: 100%;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(44,62,80,0.08);
            padding: 40px;
        }

        .guided-module-title {
            font-size: 1.8em;
            color: #2c3e50;
            font-weight: 700;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .guided-step {
            display: none;
        }

        .guided-step.active {
            display: block;
        }

        .step-question {
            font-size: 1.3em;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .step-options {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }

        .step-option-btn {
            background: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 18px 24px;
            font-size: 1.1em;
            font-weight: 500;
            color: #2c3e50;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .step-option-btn:hover {
            border-color: #2980b9;
            background: #f8fbff;
            transform: translateX(4px);
        }

        .step-option-btn .option-icon {
            font-size: 1.2em;
        }

        .step-examples {
            background: #f8fafc;
            border-left: 4px solid #2980b9;
            padding: 16px 20px;
            margin-top: 16px;
            border-radius: 8px;
        }

        .step-examples-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .step-examples-list {
            color: #555;
            line-height: 1.8;
            margin: 0;
            padding-left: 20px;
        }

        /* Form Recommendation Module Styles (exact copy from Bot/index.html) */
        .form-recommendation-module {
            background: linear-gradient(135deg, #f8fbff 0%, #e8f4fd 100%);
            border: 2px solid #2980b9;
            border-radius: 16px;
            padding: 24px;
            margin: 16px 0;
            box-shadow: 0 8px 32px rgba(41, 128, 185, 0.15);
            position: relative;
            overflow: hidden;
            display: none;
        }

        .form-recommendation-module.show {
            display: block;
            animation: formModuleSlideIn 0.5s ease-out;
        }

        .form-recommendation-module::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2980b9 0%, #4f8cff 100%);
        }

        .form-module-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .form-module-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #2980b9 0%, #4f8cff 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            box-shadow: 0 4px 12px rgba(41, 128, 185, 0.3);
        }

        .form-module-icon svg {
            width: 24px;
            height: 24px;
            color: white;
        }

        .form-module-title {
            font-size: 1.4em;
            font-weight: 700;
            color: #2c3e50;
            margin: 0;
        }

        .form-module-subtitle {
            font-size: 0.9em;
            color: #7f8c8d;
            margin: 4px 0 0 0;
        }

        .form-module-description {
            color: #555;
            font-size: 1.05em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .form-module-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .form-get-started-btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 14px 28px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .form-get-started-btn:hover {
            background: linear-gradient(135deg, #219150 0%, #27ae60 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .form-get-started-btn:active {
            transform: translateY(0);
        }

        .form-module-info {
            font-size: 0.9em;
            color: #7f8c8d;
            font-style: italic;
        }

        /* Animation for module appearance */
        @keyframes formModuleSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-navigation {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .step-back-btn {
            background: #95a5a6;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .step-back-btn:hover {
            background: #7f8c8d;
        }

        .step-back-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
    </style>
    <!-- Authentication Script - Must load first -->
    <script src="../auth.js"></script>
</head>
<body>
    <header>
        <!-- Mobile hamburger menu button -->
        <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle mobile menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <img src="../Images/logo.png" alt="FormStar Logo" width="130" height="80" onclick="location.href='../index.html';">
        <nav class="desktop-nav">
            <a href="../index.html">Home
                <span class="nav-chevron"><svg viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
            </a>
            <div class="nav-dropdown-wrapper" id="forms-dropdown-wrapper">
                <a href="#" id="forms-nav-link">Forms
                    <span class="nav-chevron forms-chevron"><svg viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                </a>
                <div class="dropdown-menu" id="forms-dropdown-menu">
                    <a href="forms.html" class="auth-required" style="display: none;">My Forms</a>
                    <a href="FreeForm.html">Free Form</a>
                    <a href="Immigration.html">Immigration</a>
                    <a href="smallclaims.html">Small Claims</a>
                    <a href="Other.html">Other</a>
                </div>
            </div>
            <a href="about.html">About Us
                <span class="nav-chevron"><svg viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
            </a>
            <a href="contact.html">Contact Us
                <span class="nav-chevron"><svg viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
            </a>
            <a href="FAQ.html">FAQ
                <span class="nav-chevron"><svg viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
            </a>
        </nav>
        
        <!-- Mobile navigation menu -->
        <nav class="mobile-nav" id="mobile-nav">
            <a href="../index.html">Home</a>
            <div class="mobile-nav-section">
                <a href="#" class="mobile-nav-toggle" id="mobile-forms-toggle">Forms <span>â–¼</span></a>
                <div class="mobile-nav-submenu" id="mobile-forms-menu">
                    <a href="forms.html" class="auth-required" style="display: none;">My Forms</a>
                    <a href="FreeForm.html">Free Form</a>
                    <a href="Immigration.html">Immigration</a>
                    <a href="smallclaims.html">Small Claims</a>
                    <a href="Other.html">Other</a>
                </div>
            </div>
            <a href="about.html">About Us</a>
            <a href="contact.html">Contact Us</a>
            <a href="FAQ.html">FAQ</a>
            <div class="mobile-nav-section" id="mobile-auth-section" style="display: none;">
                <a href="#" id="mobile-logout-btn" class="mobile-nav-logout">Log Out</a>
            </div>
        </nav>
        
        <div class="header-actions">
            <a href="account.html" class="sign-in-btn" id="sign-in-btn">Sign In</a>
            <a href="#" id="cart-icon-link" style="margin-left: -10px; display: inline-flex; align-items: center; text-decoration: none; position: relative;">
                <span class="cart-circle">
                    <svg id="cart-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="10" cy="21" r="1.5"/>
                        <circle cx="18" cy="21" r="1.5"/>
                        <path d="M2.5 4H5l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L21.5 7H6.16"/>
                    </svg>
                    <span id="cart-count-badge" style="display: none; position: absolute; top: -8px; right: -8px; width: 24px; height: 24px; background: #e74c3c; color: #fff; border-radius: 50%; font-size: 1em; font-weight: bold; align-items: center; justify-content: center; box-shadow: 0 1px 4px rgba(44,62,80,0.13); z-index: 2; text-align: center;"></span>
                </span>
            </a>
        </div>
    </header>

    <main style="min-height:60vh;background:#eaf1f8;flex:1 0 auto;">
        <!-- Banner Section -->
        <section style="width:100%;background:#fff;border-radius:0 0 32px 32px;box-shadow:0 4px 32px rgba(44,62,80,0.07);margin-bottom:24px;padding:48px 0 32px 0;display:flex;flex-direction:column;align-items:center;">
            <div style="display:flex;flex-direction:row;align-items:center;gap:48px;max-width:1100px;width:95vw;">
                <div style="flex:1;min-width:260px;max-width:420px;display:flex;align-items:center;justify-content:center;">
                    <img src="../Images/smallclaims.jpg" alt="Small Claims Banner" style="width:100%;max-width:340px;height:auto;border-radius:18px;box-shadow:0 2px 12px rgba(44,62,80,0.10);object-fit:cover;background:#eaf1f8;" />
                </div>
                <div style="flex:2;min-width:260px;">
                    <h1 style="font-size:2.6em;color:#2c3e50;font-family:'Montserrat',serif;font-weight:700;margin-bottom:18px;">Small Claims</h1>
                    <p style="font-size:1.35em;color:#444;margin-bottom:0;font-weight:500;">Small Claims Forms: Need to resolve a minor dispute quickly and affordably? Fill out the paperwork fast and hassle-free â€” we've got you covered!</p>
                </div>
            </div>
        </section>

        <!-- Forms Collection Section -->
        <section style="width:100%;max-width:1200px;margin:0 auto 80px auto;display:flex;flex-direction:column;align-items:center;">
            <!-- Guided Module Section -->
            <div class="guided-module" style="margin-bottom:0;">
                <h2 class="guided-module-title">
                    <span>âš–ï¸</span>
                    <span>Which Small Claims Form Do I Use?</span>
                    <br><br>
                </h2>
                
                <!-- Step 1: Are you suing? -->
                <div class="guided-step active" id="step1">
                    <div class="step-question">1ï¸âƒ£ Are you suing somebody?</div>
                    <div class="step-options">
                        <button class="step-option-btn" onclick="handleStep1Answer('yes')">
                            <span class="option-icon">âœ“</span>
                            <span>Yes</span>
                        </button>
                        <button class="step-option-btn" onclick="handleStep1Answer('no')">
                            <span class="option-icon">âœ—</span>
                            <span>No</span>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Filed against you? -->
                <div class="guided-step" id="step2">
                    <div class="step-question">2ï¸âƒ£ Has that person already filed a claim against you?</div>
                    <div class="step-options">
                        <button class="step-option-btn" onclick="handleStep2Answer('yes')">
                            <span class="option-icon">âœ“</span>
                            <span>Yes</span>
                        </button>
                        <button class="step-option-btn" onclick="handleStep2Answer('no')">
                            <span class="option-icon">âœ—</span>
                            <span>No</span>
                        </button>
                    </div>
                    <div class="step-navigation">
                        <button class="step-back-btn" onclick="goToStep(1)">â† Back</button>
                    </div>
                </div>

                <!-- Step 3: COVID-19 Related -->
                <div class="guided-step" id="step3">
                    <div class="step-question">3ï¸âƒ£ Is this COVID-19 related?</div>
                    <div class="step-examples">
                        <div class="step-examples-title">Examples:</div>
                        <ul class="step-examples-list">
                            <li>Missed rent or payments during shutdowns</li>
                            <li>Canceled services or refunds from the pandemic</li>
                            <li>Business losses caused by COVID rules</li>
                        </ul>
                    </div><br>
                    <div class="step-options">
                        <button class="step-option-btn" onclick="handleStep3Answer('yes')">
                            <span class="option-icon">âœ“</span>
                            <span>Yes</span>
                        </button>
                        <button class="step-option-btn" onclick="handleStep3Answer('no')">
                            <span class="option-icon">âœ—</span>
                            <span>No</span>
                        </button>
                    </div>
                    <div class="step-navigation">
                        <button class="step-back-btn" onclick="goToStep(2)">â† Back</button>
                    </div>
                </div>

                <!-- No Need Message -->
                <div class="guided-step" id="no-need-msg">
                    <div class="step-question">There's no need for you to file a small claims form.</div>
                    <div class="step-navigation">
                        <button class="step-back-btn" onclick="resetGuidedModule()">Start Over</button>
                    </div>
                </div>

                <!-- Form Recommendation Module -->
                <div class="form-recommendation-module" id="form-recommendation-module">
                    <div class="form-module-header">
                        <div class="form-module-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 21H21V19H3V21ZM5 17H19V15H5V17ZM7 13H17V11H7V13ZM9 9H15V7H9V9ZM11 5H13V3H11V5Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="form-module-title" id="form-module-title">SC-100</h3>
                            <p class="form-module-subtitle">Recommended Form</p>
                        </div>
                    </div>
                    <div class="form-module-description" id="form-module-description">
                        Plaintiff's Claim form for suing a defendant
                    </div>
                    <div class="form-module-actions">
                        <button class="form-get-started-btn" id="form-get-started-btn" onclick="handleFormCardClick()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 6H6C4.9 6 4 6.9 4 8V18C4 19.1 4.9 20 6 20H16C17.1 20 18 19.1 18 18V14M14 4H20M20 4V10M20 4L10 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Get Started
                        </button>
                        <span class="form-module-info">Click to start the form process</span>
                    </div>
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="step-back-btn" onclick="resetGuidedModule()" style="background: #95a5a6;">Start Over</button>
                    </div>
                </div>
            </div>
            
            <!-- Forms Container -->
            <div class="forms-container" style="margin-top:24px;">
                <h2 style="font-size:2em;color:#2c3e50;font-family:'Montserrat',serif;font-weight:700;margin-bottom:32px;text-align:center;margin-top:0;">Choose a Small Claims Form</h2>
                
            <div style="display:grid;grid-template-columns:repeat(3,minmax(380px,1fr));gap:32px;width:100%;">
                <!-- SC-100 Card -->
                <div class="freeform-card" style="cursor: pointer;" onclick="showCountyModal('sc100', 'SC-100 Plaintiff\'s Claim and ORDER to Go to Small Claims Court'); return false;">
                    <svg width="100" height="100" viewBox="0 0 100 100" role="img" aria-label="SC-100 Icon" style="margin-bottom:18px;display:block;">
                      <circle cx="50" cy="50" r="45" fill="#eaf1f8" stroke="#2980b9" stroke-width="2"/>
                      <text x="50%" y="56%" text-anchor="middle" dy="0" font-family="Montserrat, sans-serif" font-size="1.4em" font-weight="bold" fill="#2980b9">SC-100</text>
                    </svg>
                    <div style="font-size:1.25em;font-weight:700;color:#2c3e50;margin-bottom:8px;">SC-100 Plaintiff's Claim and ORDER to Go to Small Claims Court</div>
                    <div style="font-size:1.05em;color:#555;margin-bottom:16px;">Start your small claims case as a plaintiff and notify the defendant of your claim.</div>
                    <div style="font-size:1.1em;color:#2980b9;font-weight:700;margin-bottom:10px;">Free</div>
                    <a href="#" class="btn" style="padding:10px 36px;font-size:1.08em;" onclick="showCountyModal('sc100', 'SC-100 Plaintiff\'s Claim and ORDER to Go to Small Claims Court'); return false;">Get Started</a>
                </div>
                <!-- SC-120 Card -->
                <div class="freeform-card" style="cursor: pointer;" onclick="showCountyModal('sc120', 'SC-120 Defendant\'s Claim and ORDER to Go to Small Claims Court'); return false;">
                    <svg width="100" height="100" viewBox="0 0 100 100" role="img" aria-label="SC-120 Icon" style="margin-bottom:18px;display:block;">
                      <circle cx="50" cy="50" r="45" fill="#eaf1f8" stroke="#2980b9" stroke-width="2"/>
                      <text x="50%" y="56%" text-anchor="middle" dy="0" font-family="Montserrat, sans-serif" font-size="1.4em" font-weight="bold" fill="#2980b9">SC-120</text>
                    </svg>
                    <div style="font-size:1.25em;font-weight:700;color:#2c3e50;margin-bottom:8px;">SC-120 Defendant's Claim and ORDER to Go to Small Claims Court</div>
                    <div style="font-size:1.05em;color:#555;margin-bottom:16px;">File a counterclaim as a defendant in response to a small claims case.</div>
                    <div style="font-size:1.1em;color:#2980b9;font-weight:700;margin-bottom:10px;">Free</div>
                    <a href="#" class="btn" style="padding:10px 36px;font-size:1.08em;" onclick="showCountyModal('sc120', 'SC-120 Defendant\'s Claim and ORDER to Go to Small Claims Court'); return false;">Get Started</a>
                </div>
                <!-- SC-500 Card -->
                <div class="freeform-card" style="cursor: pointer;" onclick="showCountyModal('sc500', 'SC-500 COVID-19 Small Claims Dispute Resolution'); return false;">
                    <svg width="100" height="100" viewBox="0 0 100 100" role="img" aria-label="SC-500 Icon" style="margin-bottom:18px;display:block;">
                      <circle cx="50" cy="50" r="45" fill="#eaf1f8" stroke="#2980b9" stroke-width="2"/>
                      <text x="50%" y="56%" text-anchor="middle" dy="0" font-family="Montserrat, sans-serif" font-size="1.4em" font-weight="bold" fill="#2980b9">SC-500</text>
                    </svg>
                    <div style="font-size:1.25em;font-weight:700;color:#2c3e50;margin-bottom:8px;">SC-500 COVID-19 Small Claims Dispute Resolution</div>
                    <div style="font-size:1.05em;color:#555;margin-bottom:16px;">Resolve disputes related to COVID-19 through small claims court procedures.</div>
                    <div style="font-size:1.1em;color:#2980b9;font-weight:700;margin-bottom:10px;">Free</div>
                    <a href="#" class="btn" style="padding:10px 36px;font-size:1.08em;" onclick="showCountyModal('sc500', 'SC-500 COVID-19 Small Claims Dispute Resolution'); return false;">Get Started</a>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <!-- PROFESSIONAL FOOTER SECTION -->
    <div class="pro-footer">
        <div class="pro-footer-col address-col">
            <div class="pro-footer-logo">
                <img src="../Images/logo.png" alt="FormStar Logo" style="max-width:120px;max-height:80px;">
            </div>
            <div class="pro-footer-title">Form-Star</div>
            <div class="pro-footer-contact">
                <a href="tel:18008508370">1-800-850-8370</a> &nbsp; 
                <a href="mailto:info@rdr-gp.com">info@rdr-gp.com</a>
            </div>
        </div>
        <div class="pro-footer-col company-col">
            <div class="pro-footer-title company-title">About Form-Star</div>
            <div class="pro-footer-desc">Form-Star consists of a group of proven professionals with over 70 years of combined <strong>legal</strong>, technical, operational and administrative service experience within the non-profit, private, and public sectors. We simplify paperwork for everyone.</div>
        </div>
    </div>
    <footer>
        &copy; 2024 Form-Star. All rights reserved.
    </footer>
    <div class="cart-overlay" id="cart-overlay">
        <div class="cart-side-menu" id="cart-side-menu">
            <div class="cart-header">
                <h2>ðŸ›’ Cart</h2>
                <button class="cart-close-btn" id="cart-close-btn">&times;</button>
            </div>
            <div class="cart-content" id="cart-content">
                <div class="cart-icon-large">ðŸ›’</div>
                <div class="cart-message" id="cart-message">Create an account to start shopping!</div>
                <div class="cart-description" id="cart-description">
                    To add forms to your cart and make purchases, you'll need to create a FormStar account. 
                    Sign up now to access our complete library of legal forms and start simplifying your paperwork.
                </div>
                <a href="account.html" class="cart-signup-btn" id="cart-signup-btn">Sign Up</a>
                <div class="cart-items-list" id="cart-items-list" style="display:none;"></div>
                <button class="cart-checkout-btn" id="cart-checkout-btn" style="display:none;margin-top:24px;background:#2980b9;color:#fff;padding:15px 40px;font-size:1.1em;font-weight:700;border:none;border-radius:8px;cursor:pointer;">Checkout</button>
            </div>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="cart.js"></script>

    <!-- Cart badge update function -->
    <script>
        // Update cart count badge in header
        function updateCartCountBadge() {
            const cartCountElement = document.getElementById('cart-count-badge');
            if (cartCountElement && typeof getCartCount === 'function') {
                const count = getCartCount();
                if (count > 0) {
                    cartCountElement.textContent = count;
                    cartCountElement.style.display = 'flex';
                } else {
                    cartCountElement.style.display = 'none';
                }
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCountBadge();
            setInterval(updateCartCountBadge, 5000);
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Firebase Configuration
            const firebaseConfig = {
                apiKey: "AIzaSyDS-tSSn7fdLBgwzfHQ_1MPG1w8S_4qb04",
                authDomain: "formwiz-3f4fd.firebaseapp.com",
                projectId: "formwiz-3f4fd",
                storageBucket: "formwiz-3f4fd.firebasestorage.app",
                messagingSenderId: "404259212529",
                appId: "1:404259212529:web:15a33bce82383b21cfed50",
                measurementId: "G-P07YEN0HPD"
            };

            // Initialize Firebase
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            const auth = firebase.auth();
            const signInBtn = document.getElementById('sign-in-btn');
            
            // Mobile auth elements - declared once for use in both auth handler and mobile menu
            const mobileAuthSection = document.getElementById('mobile-auth-section');
            const mobileLogoutBtn = document.getElementById('mobile-logout-btn');
            
            // Auth state management - show/hide mobile logout
            auth.onAuthStateChanged(function(user) {
                const myFormsLinks = document.querySelectorAll('.auth-required');
                
                if (user) {
                    if (signInBtn) signInBtn.style.display = 'none';
                    if (mobileAuthSection) mobileAuthSection.style.display = 'block';
                    
                    myFormsLinks.forEach(link => {
                        link.style.display = 'block';
                    });
                } else {
                    if (signInBtn) signInBtn.style.display = 'inline-block';
                    if (mobileAuthSection) mobileAuthSection.style.display = 'none';
                    
                    myFormsLinks.forEach(link => {
                        link.style.display = 'none';
                    });
                }
            });

            // Dropdown for Forms nav
            const formsWrapper = document.getElementById('forms-dropdown-wrapper');
            const formsLink = document.getElementById('forms-nav-link');
            const dropdownMenu = document.getElementById('forms-dropdown-menu');
            let dropdownOpen = false;

            function openDropdown() {
                formsWrapper.classList.add('open');
                dropdownOpen = true;
            }
            function closeDropdown() {
                formsWrapper.classList.remove('open');
                dropdownOpen = false;
            }
            formsLink.addEventListener('click', function(e) {
                e.preventDefault();
                dropdownOpen ? closeDropdown() : openDropdown();
            });
            document.addEventListener('mousedown', function(e) {
                if (!formsWrapper.contains(e.target)) {
                    closeDropdown();
                }
            });
            // Keyboard accessibility
            formsLink.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    dropdownOpen ? closeDropdown() : openDropdown();
                }
            });

            // Mobile menu functionality
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileNav = document.getElementById('mobile-nav');
            const mobileFormsToggle = document.getElementById('mobile-forms-toggle');
            const mobileFormsMenu = document.getElementById('mobile-forms-menu');
            const body = document.body;

            function toggleMobileMenu() {
                if (mobileMenuToggle && mobileNav) {
                    mobileMenuToggle.classList.toggle('active');
                    mobileNav.classList.toggle('active');
                    body.classList.toggle('menu-open');
                }
            }

            function closeMobileMenu() {
                if (mobileMenuToggle && mobileNav) {
                    mobileMenuToggle.classList.remove('active');
                    mobileNav.classList.remove('active');
                    body.classList.remove('menu-open');
                }
            }

            // Toggle mobile menu
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleMobileMenu();
                });
            }

            // Toggle mobile forms submenu
            if (mobileFormsToggle) {
                mobileFormsToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    mobileFormsToggle.classList.toggle('active');
                    if (mobileFormsMenu) {
                        mobileFormsMenu.classList.toggle('active');
                    }
                });
            }

            // Close mobile menu when clicking on links
            if (mobileNav) {
                mobileNav.addEventListener('click', function(e) {
                    if (e.target.tagName === 'A' && !e.target.classList.contains('mobile-nav-toggle')) {
                        closeMobileMenu();
                    }
                });
            }

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                if (mobileNav && !mobileNav.contains(e.target) && mobileMenuToggle && !mobileMenuToggle.contains(e.target)) {
                    closeMobileMenu();
                }
            });

            // Close mobile menu on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeMobileMenu();
                }
            });

            // Prevent body scroll when menu is open
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.attributeName === 'class') {
                        if (body.classList.contains('menu-open')) {
                            body.style.overflow = 'hidden';
                        } else {
                            body.style.overflow = '';
                        }
                    }
                });
            });
            observer.observe(body, { attributes: true });

            // Mobile logout button
            if (mobileLogoutBtn) {
                mobileLogoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    auth.signOut().then(() => {
                        window.location.reload();
                    }).catch((error) => {
                        alert('Sign Out Error: ' + error.message);
                    });
                });
            }

            // Cart side menu functionality
            const cartIconLink = document.getElementById('cart-icon-link');
            const cartOverlay = document.getElementById('cart-overlay');
            const cartSideMenu = document.getElementById('cart-side-menu');
            const cartCloseBtn = document.getElementById('cart-close-btn');
            const cartContent = document.getElementById('cart-content');
            const cartMessage = document.getElementById('cart-message');
            const cartDescription = document.getElementById('cart-description');
            const cartSignupBtn = document.getElementById('cart-signup-btn');
            const cartItemsList = document.getElementById('cart-items-list');
            const cartCheckoutBtn = document.getElementById('cart-checkout-btn');

            function openCartSideMenu() {
                cartOverlay.classList.add('active');
                cartSideMenu.classList.add('active');
                cartOverlay.style.opacity = '1';
                cartOverlay.style.visibility = 'visible';
                document.body.style.overflow = 'hidden';
            }

            function closeCartSideMenu() {
                cartOverlay.classList.remove('active');
                cartSideMenu.classList.remove('active');
                cartOverlay.style.opacity = '0';
                cartOverlay.style.visibility = 'hidden';
                document.body.style.overflow = '';
            }

            if (cartIconLink) {
                cartIconLink.addEventListener('click', async function(e) {
                    e.preventDefault();
                    if (auth.currentUser) {
                        openCartSideMenu();
                        cartMessage.style.display = 'none';
                        cartDescription.style.display = 'none';
                        cartSignupBtn.style.display = 'none';
                        cartItemsList.style.display = 'block';
                        cartCheckoutBtn.style.display = 'none';
                        cartItemsList.innerHTML = '';
                        // --- Use formwiz_cart cookie for cart data (like cart.html) ---
                        function getCookie(name) {
                            const eq = name + '=';
                            const parts = document.cookie.split(';');
                            for (let c of parts) {
                                while (c.charAt(0) === ' ') c = c.slice(1);
                                if (c.indexOf(eq) === 0) return c.slice(eq.length);
                            }
                            return null;
                        }
                        let cart = [];
                        try {
                            const cartData = getCookie('formwiz_cart');
                            if (cartData) cart = JSON.parse(cartData);
                        } catch (e) { cart = []; }
                        if (!Array.isArray(cart) || cart.length === 0) {
                            cartItemsList.innerHTML = '<div style="color:#7f8c8d;font-size:1.1em;margin-top:18px;">Your cart is empty.</div>';
                            cartCheckoutBtn.style.display = 'none';
                            return;
                        }
                        let total = 0;
                        // Fetch prices for all items (simulate fetchStripePrice)
                        async function fetchStripePrice(priceId) {
                            try {
                                const res = await fetch(`/stripe-price/${priceId}`, { mode: 'cors' });
                                if (!res.ok) return null;
                                const data = await res.json();
                                return data;
                            } catch {
                                return null;
                            }
                        }
                        // Render cart items with price fetch
                        cartItemsList.innerHTML = '<div style="color:#7f8c8d;font-size:1.1em;margin-top:18px;">Loading cart...</div>';
                        let html = '';
                        let totalAmount = 0;
                        let itemCount = 0;
                        for (const item of cart) {
                            const priceInfo = await fetchStripePrice(item.priceId);
                            let display = '...';
                            let priceVal = 0;
                            if (priceInfo && priceInfo.unit_amount != null) {
                                display = `$${(priceInfo.unit_amount / 100).toFixed(2)}`;
                                priceVal = priceInfo.unit_amount / 100;
                                totalAmount += priceVal;
                            }
                            // Capitalize defendant's name if present
                            let defendantDisplay = '';
                            if (item.defendantName) {
                                const capName = String(item.defendantName)
                                  .split(/\s+/)
                                  .map(w => w.charAt(0).toUpperCase() + w.slice(1).toLowerCase())
                                  .join(' ');
                                defendantDisplay = `<div style='font-weight:bold;color:#e74c3c;'>Defendant: ${capName}</div>`;
                            }
                            html += `
                                <div class="cart-item">
                                    <div class="cart-item-info">
                                        <div class="cart-item-title">${item.title || 'Form'}</div>
                                        ${defendantDisplay}
                                        ${item.countyName ? `<div class='cart-item-county' style='font-size:0.98em;color:#153a5b;margin-bottom:2px;'>${item.countyName}</div>` : ''}
                                        <div class="cart-item-price">${display}</div>
                                    </div>
                                    <button class="remove-item" title="Remove" onclick="(function(){const cart=JSON.parse(decodeURIComponent(document.cookie.split('; ').find(row=>row.startsWith('formwiz_cart='))?.split('=')[1]||'[]'));cart.splice(${itemCount},1);document.cookie='formwiz_cart='+encodeURIComponent(JSON.stringify(cart))+';path=/;max-age=2592000';window.location.reload();})()">
                                        <svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='3 6 5 6 21 6'></polyline><path d='M19 6l-2 14H7L5 6'></path><path d='M10 11v6'></path><path d='M14 11v6'></path><path d='M5 6V4a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2'></path></svg>
                                    </button>
                                </div>
                            `;
                            itemCount++;
                        }
                        // Total and checkout
                        html += `<div class="cart-summary">
                            <div class="summary-label">Total:</div>
                            <div class="total-amount">$${totalAmount.toFixed(2)}</div>
                        </div>`;
                        cartItemsList.innerHTML = html;
                        cartCheckoutBtn.style.display = 'block';
                    } else {
                        // User is not logged in, show signup prompt
                        openCartSideMenu();
                        cartMessage.style.display = 'block';
                        cartDescription.style.display = 'block';
                        cartSignupBtn.style.display = 'inline-block';
                        cartItemsList.style.display = 'none';
                        cartCheckoutBtn.style.display = 'none';
                    }
                });
            }

            if (cartCloseBtn) {
                cartCloseBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    closeCartSideMenu();
                });
            }

            if (cartOverlay) {
                cartOverlay.addEventListener('click', function(e) {
                    if (e.target === cartOverlay) {
                        closeCartSideMenu();
                    }
                });
            }

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeCartSideMenu();
                }
            });
        });
    </script>

<div class="cart-overlay" id="cart-overlay">
    <div class="cart-side-menu" id="cart-side-menu">
        <div class="cart-header">
            <h2>ðŸ›’ Cart</h2>
            <button class="cart-close-btn" id="cart-close-btn">&times;</button>
        </div>
        <div class="cart-content" id="cart-content">
            <div class="cart-icon-large">ðŸ›’</div>
            <div class="cart-message" id="cart-message">Create an account to start shopping!</div>
            <div class="cart-description" id="cart-description">
                To add forms to your cart and make purchases, you'll need to create a FormStar account. 
                Sign up now to access our complete library of legal forms and start simplifying your paperwork.
            </div>
            <a href="account.html" class="cart-signup-btn" id="cart-signup-btn">Sign Up</a>
            <div class="cart-items-list" id="cart-items-list" style="display:none;"></div>
            <button class="cart-checkout-btn" id="cart-checkout-btn" style="display:none;margin-top:24px;background:#2980b9;color:#fff;padding:15px 40px;font-size:1.1em;font-weight:700;border:none;border-radius:8px;cursor:pointer;">Checkout</button>
        </div>
    </div>
    </div>

    <!-- County Selection Modal -->
    <div id="county-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; text-align: center;">
            <span class="close-modal" id="county-modal-close">&times;</span>
            <h2 id="county-modal-title">Which county are you filing in?</h2>
            <p id="county-modal-message" style="font-size: 1.1em; margin: 20px 0; line-height: 1.5;">Enter your zip code below to determine your county.</p>
            <input type="text" id="county-zip-input" placeholder="Enter zip code" maxlength="5" pattern="[0-9]*" inputmode="numeric" style="width: 90%; padding: 12px; font-size: 1.1em; border-radius: 6px; border: 2px solid #e2e8f0; margin-bottom: 18px; text-align: center;">
            <div id="county-modal-error" style="color: #e74c3c; font-size: 1em; margin-bottom: 10px; display: none;"></div>
              <div id="county-modal-buttons" style="display: flex; gap: 15px; justify-content: center; margin-top: 10px;">
                  <button type="button" id="county-modal-cancel" class="btn" style="width: auto; padding: 12px 30px; background-color: #95a5a6;">Cancel</button>
                  <button type="button" id="county-modal-submit" class="btn" style="width: auto; padding: 12px 30px; background-color: #2980b9;">Submit</button>
              </div>
        </div>
    </div>

    <!-- Defendant Name Modal -->
    <div id="defendant-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; text-align: center;">
            <span class="close-modal" id="defendant-modal-close">&times;</span>
            <h2>Defendant Information</h2>
            <p style="font-size: 1.1em; margin: 20px 0; line-height: 1.5;">Who are you suing?</p>
            <input type="text" id="defendant-name-input" placeholder="Enter defendant's name" style="width: 90%; padding: 12px; font-size: 1.1em; border-radius: 6px; border: 2px solid #e2e8f0; margin-bottom: 18px;">
            <div id="defendant-modal-error" style="color: #e74c3c; font-size: 1em; margin-bottom: 10px; display: none;"></div>
              <div style="display: flex; gap: 15px; justify-content: center; margin-top: 10px;">
                  <button type="button" id="defendant-modal-cancel" class="btn" style="width: auto; padding: 12px 30px; background-color: #95a5a6;">Cancel</button>
                  <button type="button" id="defendant-modal-submit" class="btn" style="width: auto; padding: 12px 30px; background-color: #2980b9;">Submit</button>
              </div>
        </div>
    </div>

    <!-- Popup System JavaScript -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDS-tSSn7fdLBgwzfHQ_1MPG1w8S_4qb04",
            authDomain: "formwiz-3f4fd.firebaseapp.com",
            projectId: "formwiz-3f4fd",
            storageBucket: "formwiz-3f4fd.firebasestorage.app",
            messagingSenderId: "404259212529",
            appId: "1:404259212529:web:15a33bce82383b21cfed50",
            measurementId: "G-P07YEN0HPD"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Global variables for popup system
        let currentFormId = null;
        let currentFormName = null;
        let currentCounty = null;
        let currentZipCode = null;
        let availableFormsData = [];

        // Load county data from JSON file
        let countyZipMap = null;
        async function loadCountyData() {
            if (countyZipMap) return countyZipMap;
            try {
                const response = await fetch('../JSON/county-zips.json');
                if (!response.ok) throw new Error('Failed to load county-zips.json');
                countyZipMap = await response.json();
                console.log('Loaded county data from JSON:', countyZipMap);
                return countyZipMap;
            } catch (e) {
                console.error('Error loading county-zips.json:', e);
                return {};
            }
        }

        // Load available forms from Firebase
        async function loadAvailableForms() {
            try {
                const snapshot = await db.collection('forms').get();
                const forms = [];
                
                snapshot.forEach(doc => {
                    const formData = doc.data();
                    formData.id = doc.id;
                    forms.push(formData);
                });
                
                console.log('Loaded available forms from Firebase:', forms);
                return forms;
            } catch (error) {
                console.error('Error loading available forms from Firebase:', error);
                return [];
            }
        }

        // Show county modal
        function showCountyModal(formId, formName) {
            console.log('showCountyModal called with:', { formId, formName });
            currentFormId = formId;
            currentFormName = formName;
            currentCounty = null;
            console.log('Variables set:', { currentFormId, currentFormName, currentCounty });
            
            // Reset modal state
            document.getElementById('county-zip-input').value = '';
            document.getElementById('county-zip-input').style.display = 'block';
            document.getElementById('county-modal-error').style.display = 'none';
            document.getElementById('county-modal-title').textContent = 'Which county are you filing in?';
            document.getElementById('county-modal-message').textContent = 'Enter your zip code below to determine your county.';
            document.getElementById('county-modal-buttons').style.display = 'flex';
            
            document.getElementById('county-modal').style.display = 'block';
        }

        // Show defendant modal
        function showDefendantModal() {
            document.getElementById('defendant-name-input').value = '';
            document.getElementById('defendant-modal-error').style.display = 'none';
            document.getElementById('defendant-modal').style.display = 'block';
        }

        // Close county modal
        function closeCountyModal() {
            document.getElementById('county-modal').style.display = 'none';
            currentFormId = null;
            currentFormName = null;
            currentCounty = null;
            currentZipCode = null;
        }

        // Hide county modal without resetting variables
        function hideCountyModal() {
            document.getElementById('county-modal').style.display = 'none';
        }

        // Close defendant modal
        function closeDefendantModal() {
            document.getElementById('defendant-modal').style.display = 'none';
        }

        // Handle county zip input submission
        async function handleCountySubmit() {
            const zipCode = document.getElementById('county-zip-input').value.trim();
            const errorDiv = document.getElementById('county-modal-error');
            
            if (!zipCode) {
                errorDiv.textContent = 'Please enter a zip code.';
                errorDiv.style.display = 'block';
                return;
            }
            
            if (!/^\d{5}$/.test(zipCode)) {
                errorDiv.textContent = 'Please enter a valid 5-digit zip code.';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Load county data from JSON
            const countyData = await loadCountyData();
            
            // Look up county - iterate through all counties to find the one containing this zip code
            let county = null;
            for (const [countyName, zipCodes] of Object.entries(countyData)) {
                if (zipCodes.includes(zipCode)) {
                    county = countyName;
                    break;
                }
            }
            
            if (!county) {
                errorDiv.textContent = 'Zip code not found. Please check your zip code and try again.';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Check if form supports this county
            if (!availableFormsData.length) {
                availableFormsData = await loadAvailableForms();
            }
            const formObj = availableFormsData.find(f => f.id === currentFormId);
            
            if (formObj && (!Array.isArray(formObj.counties) || !formObj.counties.includes(county))) {
                errorDiv.textContent = `This form is not offered in ${county} County. Please try a different zip code.`;
                errorDiv.style.display = 'block';
                return;
            }
            
            currentCounty = county;
            currentZipCode = zipCode;
            console.log('County and zip code set:', { currentFormId, currentFormName, currentCounty, currentZipCode });
            
            // Update modal for confirmation
            document.getElementById('county-modal-title').textContent = 'Confirm Your County';
            document.getElementById('county-modal-message').textContent = `Great! You're filing in ${county} County, right?`;
            document.getElementById('county-zip-input').style.display = 'none';
            document.getElementById('county-modal-buttons').style.display = 'none';
            document.getElementById('county-modal-error').style.display = 'none';
            
            // Add confirmation buttons
            const buttonsDiv = document.getElementById('county-modal-buttons');
            buttonsDiv.innerHTML = `
                <button type="button" id="county-confirm-no" class="btn" style="width: auto; padding: 12px 30px; background-color: #95a5a6;">No</button>
                <button type="button" id="county-confirm-yes" class="btn" style="width: auto; padding: 12px 30px; background-color: #2980b9;">Yes</button>
            `;
            buttonsDiv.style.display = 'flex';
            
            // Add event listeners for confirmation buttons
            document.getElementById('county-confirm-no').addEventListener('click', function() {
                // Reset to zip input
                document.getElementById('county-modal-title').textContent = 'Which county are you filing in?';
                document.getElementById('county-modal-message').textContent = 'Enter your zip code below to determine your county.';
                document.getElementById('county-zip-input').value = '';
                document.getElementById('county-zip-input').style.display = 'block';
                document.getElementById('county-modal-error').style.display = 'none';
                buttonsDiv.innerHTML = `
                    <button type="button" id="county-modal-cancel" class="btn" style="width: auto; padding: 12px 30px; background-color: #95a5a6;">Cancel</button>
                    <button type="button" id="county-modal-submit" class="btn" style="width: auto; padding: 12px 30px; background-color: #2980b9;">Submit</button>
                `;
                addCountyModalEventListeners();
            });
            
            document.getElementById('county-confirm-yes').addEventListener('click', async function() {
                console.log('County confirmed, variables before transition:', { currentFormId, currentFormName, currentCounty, currentZipCode });
                // Hide county modal but don't reset variables yet
                hideCountyModal();
                
                // Check if form requires defendant information
                if (!availableFormsData.length) {
                    availableFormsData = await loadAvailableForms();
                }
                const formObj = availableFormsData.find(f => f.id === currentFormId);
                console.log('Form object from Firebase:', formObj);
                
                if (formObj && formObj.defendant && formObj.defendant.toUpperCase() === 'YES') {
                    // Form requires defendant information
                    showDefendantModal();
                } else {
                    // Form doesn't require defendant information, proceed directly
                    // Use form name from Firebase data if available, otherwise use currentFormName
                    const formNameToUse = formObj && formObj.name ? formObj.name : currentFormName;
                    console.log('Form name to use:', formNameToUse, 'from formObj.name:', formObj?.name, 'from currentFormName:', currentFormName);
                    
                    // Ensure we have a valid form name
                    if (!formNameToUse) {
                        console.error('No form name available! formObj:', formObj, 'currentFormName:', currentFormName);
                        return;
                    }
                    
                    addFormToCart(currentFormId, formNameToUse, null, currentCounty, currentZipCode);
                }
            });
        }

        // Handle defendant name submission
        async function handleDefendantSubmit() {
            console.log('Defendant submit called, variables:', { currentFormId, currentFormName, currentCounty });
            const defendantName = document.getElementById('defendant-name-input').value.trim();
            const errorDiv = document.getElementById('defendant-modal-error');
            
            if (!defendantName) {
                errorDiv.textContent = 'Please enter the defendant\'s name.';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Get form name from Firebase data
            if (!availableFormsData.length) {
                availableFormsData = await loadAvailableForms();
            }
            const formObj = availableFormsData.find(f => f.id === currentFormId);
            const formNameToUse = formObj && formObj.name ? formObj.name : currentFormName;
            console.log('Defendant modal - Form name to use:', formNameToUse, 'from formObj.name:', formObj?.name, 'from currentFormName:', currentFormName);
            
            // Ensure we have a valid form name
            if (!formNameToUse) {
                console.error('Defendant modal - No form name available! formObj:', formObj, 'currentFormName:', currentFormName);
                return;
            }
            
            // Add form to cart and redirect
            addFormToCart(currentFormId, formNameToUse, defendantName, currentCounty, currentZipCode);
            closeDefendantModal();
        }

        // Add form to portfolio (using the same system as forms.html)
        async function addFormToCart(formId, formName, defendantName, county, zipCode = null) {
            console.log('Adding form to portfolio:', { formId, formName, defendantName, county, zipCode, currentZipCode });
            console.log('Form name being stored:', formName);
            
            // Use the passed zipCode parameter or fall back to the global currentZipCode
            const zipCodeToUse = zipCode || currentZipCode;
            
            const user = auth.currentUser;
            if (!user) {
                // If not logged in, redirect to form without portfolio
                const formUrl = getFormUrl(formId);
                let url = formUrl + '&county=' + encodeURIComponent(county);
                if (defendantName) url += '&defendantName=' + encodeURIComponent(defendantName);
                // Include zip code in URL if available
                if (zipCodeToUse) {
                    url += '&zipCode=' + encodeURIComponent(zipCodeToUse);
                }
                window.location.href = url;
                return;
            }
            
            const userId = user.uid;
            try {
                // Add form to user's portfolio in Firebase
                const formRef = db.collection('users').doc(userId).collection('forms').doc();
                const portfolioId = formRef.id;
                
                const formUrl = getFormUrl(formId);
                
                const formData = {
                    originalFormId: formId, // Keep reference to original form ID (like forms.js)
                    name: formName, // Use 'name' field like forms.js
                    url: formUrl, // Use 'url' field like forms.js
                    countyName: county,
                    addedAt: firebase.firestore.FieldValue.serverTimestamp(), // Use 'addedAt' like forms.js
                    lastOpened: firebase.firestore.FieldValue.serverTimestamp(),
                    zipCode: zipCodeToUse // Store the zip code like forms.js does
                };
                
                // Only add defendantName if it's provided
                if (defendantName) {
                    formData.defendantName = defendantName;
                }
                
                await formRef.set(formData);
                
                console.log('Form added to portfolio with ID:', portfolioId);
                console.log('Form data that was stored:', formData);
                
                // Verify the form was actually stored by reading it back
                const verifyDoc = await formRef.get();
                if (verifyDoc.exists) {
                    const storedData = verifyDoc.data();
                    console.log('Verified stored data:', storedData);
                    
                    // Show success alert with debug info
                    //alert(`âœ… Form successfully added to portfolio!\n\nDebug Info:\n- Form ID: ${formId}\n- Form Name: ${formName}\n- County: ${county}\n- Portfolio ID: ${portfolioId}\n- Stored Name Field: ${storedData.name}\n- Defendant Name: ${defendantName || 'N/A'}\n\nClick OK to proceed to the form.`);
                    
                    // Redirect to form with portfolio ID
                    const separator = formUrl.includes('?') ? '&' : '?';
                    let url = formUrl + separator + 'county=' + encodeURIComponent(county) + '&portfolioId=' + encodeURIComponent(portfolioId);
                    if (defendantName) url += '&defendantName=' + encodeURIComponent(defendantName);
                    // Include zip code in URL if available
                    if (currentZipCode) {
                        url += '&zipCode=' + encodeURIComponent(currentZipCode);
                    }
                    
                    window.location.href = url;
                    
                    // Reset variables after successful form addition and URL construction
                    currentFormId = null;
                    currentFormName = null;
                    currentCounty = null;
                    currentZipCode = null;
                } else {
                    console.error('Failed to verify form was stored!');
                    //alert('âŒ Error: Form was not properly stored in portfolio. Please try again.');
                }
                
            } catch (error) {
                console.error('Error adding form to portfolio:', error);
                console.error('Error details:', {
                    formId,
                    formName,
                    defendantName,
                    county,
                    error: error.message
                });
                
                // Show error alert with debug info
                //alert(`âŒ Error adding form to portfolio!\n\nDebug Info:\n- Form ID: ${formId}\n- Form Name: ${formName}\n- County: ${county}\n- Defendant Name: ${defendantName || 'N/A'}\n- Error: ${error.message}\n\nClick OK to proceed to form without portfolio.`);
                
                // Fallback: redirect to form without portfolio
                const formUrl = getFormUrl(formId);
                let url = formUrl + '&county=' + encodeURIComponent(county);
                if (defendantName) url += '&defendantName=' + encodeURIComponent(defendantName);
                // Include zip code in URL if available
                if (zipCodeToUse) {
                    url += '&zipCode=' + encodeURIComponent(zipCodeToUse);
                }
                window.location.href = url;
                
                // Reset variables after error fallback
                currentFormId = null;
                currentFormName = null;
                currentCounty = null;
                currentZipCode = null;
            }
        }
        
        // Normalize URLs from Firestore/admin so they point to the correct file
        function normalizeFormUrl(url, formId = null) {
            if (!url) return '';
            let normalized = url.trim();

            // Leave absolute URLs untouched
            if (/^https?:\/\//i.test(normalized)) {
                return normalized;
            }

            // Strip leading "Forms/" to avoid duplication
            normalized = normalized.replace(/^\/?Forms\//i, '');

            if (normalized.startsWith('../') || normalized.startsWith('/')) {
                // Already relative or root-relative; keep after strip
                normalized = normalized;
            } else {
                // Prefix with ../Forms/ for pages that live under /Pages
                normalized = '../Forms/' + normalized.replace(/^\/+/, '');
            }

            // Append formId if missing
            if (formId && !/formId=/i.test(normalized)) {
                const separator = normalized.includes('?') ? '&' : '?';
                normalized += `${separator}formId=${formId}`;
            }

            return normalized;
        }

        // Helper function to get form URL
        function getFormUrl(formId) {
            const formObj = availableFormsData.find(f => f.id === formId);
            if (formObj && formObj.url) {
                const normalized = normalizeFormUrl(formObj.url, formId);
                if (normalized) return normalized;
            }

            // Fallbacks for known forms
            if (formId === 'sc100') {
                return '../Forms/SC-100/sc-100.html?formId=sc100';
            } else if (formId === 'sc120') {
                return '../Forms/SC-120/sc-120.html?formId=sc120';
            } else if (formId === 'sc500') {
                return '../Forms/SC-500/sc-500.html?formId=sc500';
            } else {
                return normalizeFormUrl(`${formId}.html`, formId);
            }
        }

        // Cookie helper functions
        function getCookie(name) {
            const eq = name + '=';
            const parts = document.cookie.split(';');
            for (let c of parts) {
                while (c.charAt(0) === ' ') c = c.slice(1);
                if (c.indexOf(eq) === 0) return c.slice(eq.length);
            }
            return null;
        }

        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + value + expires + "; path=/";
        }

        // Add event listeners for county modal
        function addCountyModalEventListeners() {
            document.getElementById('county-modal-submit').addEventListener('click', handleCountySubmit);
            document.getElementById('county-modal-cancel').addEventListener('click', closeCountyModal);
            document.getElementById('county-modal-close').addEventListener('click', closeCountyModal);
        }

        // Add event listeners for defendant modal
        function addDefendantModalEventListeners() {
            document.getElementById('defendant-modal-submit').addEventListener('click', handleDefendantSubmit);
            document.getElementById('defendant-modal-cancel').addEventListener('click', closeDefendantModal);
            document.getElementById('defendant-modal-close').addEventListener('click', closeDefendantModal);
        }

        // Guided Module JavaScript
        let selectedFormId = null;
        let selectedFormName = null;

        function handleStep1Answer(answer) {
            if (answer === 'yes') {
                // Go to Step 2 (Filed against you?)
                goToStep(2);
            } else if (answer === 'no') {
                // Show "No need" message
                goToStep('no-need-msg');
            }
        }

        function handleStep2Answer(answer) {
            if (answer === 'yes') {
                // Show SC-120 recommendation immediately (defendant's claim)
                showFormRecommendation('sc120', 'SC-120', 'Defendant\'s Claim and ORDER to Go to Small Claims Court', 'File a counterclaim as a defendant in response to a small claims case.');
            } else if (answer === 'no') {
                // Go to Step 3 (COVID?) to determine which form to recommend
                goToStep(3);
            }
        }

        function handleStep3Answer(answer) {
            if (answer === 'yes') {
                // Show SC-500 recommendation
                showFormRecommendation('sc500', 'SC-500', 'COVID-19 Small Claims Dispute Resolution', 'Resolve disputes related to COVID-19 through small claims court procedures.');
            } else if (answer === 'no') {
                // Show SC-100 recommendation
                showFormRecommendation('sc100', 'SC-100', 'Plaintiff\'s Claim and ORDER to Go to Small Claims Court', 'Start your small claims case as a plaintiff and notify the defendant of your claim.');
            }
        }

        function goToStep(stepIdentifier) {
            // Hide all steps
            document.querySelectorAll('.guided-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Hide recommendation module
            const recommendationModule = document.getElementById('form-recommendation-module');
            if (recommendationModule) {
                recommendationModule.classList.remove('show');
            }
            
            // Show the requested step
            // Handle both number (e.g., 2) and string ID (e.g., 'no-need-msg')
            let id = stepIdentifier;
            if (typeof stepIdentifier === 'number' || (typeof stepIdentifier === 'string' && /^\d+$/.test(stepIdentifier))) {
                id = 'step' + stepIdentifier;
            }
            
            const step = document.getElementById(id);
            if (step) {
                step.classList.add('active');
            }
        }

        function showFormRecommendation(formId, formNumber, formName, description) {
            selectedFormId = formId;
            selectedFormName = formNumber + ' ' + formName;
            
            // Hide all steps
            document.querySelectorAll('.guided-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Update recommendation module
            document.getElementById('form-module-title').textContent = formNumber;
            document.getElementById('form-module-description').textContent = description;
            
            // Show recommendation module
            const recommendationModule = document.getElementById('form-recommendation-module');
            if (recommendationModule) {
                recommendationModule.classList.add('show');
            }
        }

        function handleFormCardClick() {
            if (selectedFormId && selectedFormName) {
                // Use the existing showCountyModal function
                showCountyModal(selectedFormId, selectedFormName);
            }
        }

        function resetGuidedModule() {
            // Reset to step 1
            goToStep(1);
            // Clear selected form
            selectedFormId = null;
            selectedFormName = null;
        }

        // Initialize popup system
        document.addEventListener('DOMContentLoaded', async function() {
            await loadAvailableForms();
            addCountyModalEventListeners();
            addDefendantModalEventListeners();
            
            // Add zip code input validation
            const zipInput = document.getElementById('county-zip-input');
            if (zipInput) {
                zipInput.addEventListener('input', function() {
                    // Only allow numbers, max 5 digits
                    let val = zipInput.value.replace(/\D/g, '');
                    if (val.length > 5) val = val.slice(0, 5);
                    zipInput.value = val;
                });
            }
            
            // Close modals when clicking outside
            window.onclick = function(event) {
                const countyModal = document.getElementById('county-modal');
                const defendantModal = document.getElementById('defendant-modal');
                
                if (event.target === countyModal) {
                    closeCountyModal();
                }
                if (event.target === defendantModal) {
                    closeDefendantModal();
                }
            };
        });
    </script>
</body>
</html>


    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Custom Form</title>
        <style>
		
	input[type="text"], select {
    background-color: #e6f4ff; /* Light blue background */
    border: 2px solid #2980b9; /* Matching border color */
    border-radius: 10px; /* Rounded borders */
    padding: 8px; /* Padding inside the input */
    box-sizing: border-box; /* Include padding and border in the width */
    transition: border-color 0.3s ease; /* Smooth transition for border color */
}

input[type="text"]:focus, select:focus {
    border-color: #1c598a; /* Darker blue when focused */
    outline: none; /* Removes the default focus outline */
}

        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            font-family: 'Montserrat', sans-serif;
            color: #333;
            background-color: #f4f4f4;
        }
        header {
            background-color: #2c3e50;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }
		
		#box {
    border: 4px solid lightblue;
    border-color: #2c3e50;
    border-radius: 10px;
    padding: 20px;
    padding-bottom: 70px; /* Increase bottom padding to make space for buttons */
    margin: 50px;
    background-color: #ffffff;
    width: auto;
    height: auto; /* Allow the div to grow with its content */

    position: relative;
	
		}
		
		  .section { display: none; }
            .section.active { display: block; }
            .thank-you-message { display: none; font-size: 20px; font-weight: bold; text-align: center; margin-top: 20px; }
			
			
			
        header img {
            cursor: pointer;
        }
        nav {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
        }
        nav a {
            color: #ffffff;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        nav a:hover {
            color: #2980b9;
        }
        section {
            padding: 50px;
            text-align: center;
            flex: 1;
            display: grid;
            gap: 20px;
        }
        section h1 {
            color: #2980b9;
            font-weight: normal;
        }
        section p {
            margin-bottom: 20px;
        }
       /* Apply button style globally to all button elements */
button {
    background-color: #2980b9;
    color: #ffffff;
    padding: 5px 30px;
    text-decoration: none;
    font-weight: bold;
    border-radius: 5px;
    transition: background-color 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: fit-content;
    margin: 0 auto;
}

/* Hover effect for all buttons */
button:hover {
    background-color: #1c598a;
}

		
        .steps {
            display: grid;
            grid-template-columns: repeat(3, minmax(150px, 1fr));
            justify-items: center;
            gap: 10px;
            max-width: 800px; /* Adjust the max-width to bring them closer */
            margin: 0 auto; /* Center the steps container */
        }
        .step {
            text-align: center;
        }
		
        footer {
            text-align: center;
            padding: 20px;
            background-color: #2c3e50;
            color: white;
        }
		
		.section {
                display: none;
            }
            .section.active {
                display: block;
            }
            .thank-you-message {
                display: none;
                font-size: 20px;
                font-weight: bold;
                text-align: center;
                margin-top: 20px;
            }
			
			
			
			
			
        /* Media query for smaller screens */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 10px;
            }
            nav {
                position: static;
                transform: none;
                margin-top: 10px;
            }
            .steps {
                grid-template-columns: 1fr;
                max-width: 100%; /* Full width on smaller screens */
            }
        }
		
		
		
		<style>
        <style>
            .section { display: none; }
            .section.active { display: block; }
            .thank-you-message { display: none; font-size: 20px; font-weight: bold; text-align: center; margin-top: 20px; }
            .hidden { display: none; }
           
            #checkmark {
                width: fit-content;
            }
    
            .checkbox-label, .noneApplyCheckbox {
                font-size: 18px;
                display: block;
                text-align: left;
                margin: 0 auto;
                cursor: pointer;
            }
			
			
			input[type="text"],
input[type="number"],
textarea,
select {
    background-color: #e6f4ff; /* Light blue background */
    border: 2px solid #2980b9; /* Matching border color */
    border-radius: 10px; /* Rounded borders */
    padding: 8px; /* Padding inside the input */
    box-sizing: border-box; /* Include padding and border in the width */
    transition: border-color 0.3s ease; /* Smooth transition for border color */
}

input[type="text"]:focus,
input[type="number"]:focus,
textarea:focus,
select:focus {
    border-color: #1c598a; /* Darker blue when focused */
    outline: none; /* Removes the default focus outline */
}



        </style>
    </head>
<body>

    <header>
        <img src="logo.png" alt="FormWiz Logo" width="130" height="80" onclick="location.href='index.html';">
        <nav>
            <a href="index.html">Home</a>
            <a href="forms.html">Forms</a>
            <a href="contact.html">Contact Us</a>
        </nav>
    </header>
	
	
	<input type="text" id="PetitionerName1[0]" name="PetitionerName1[0]" placeholder="Full name" required>
	
	

    <div id="questions">

         
            <div id="question1" class="questionBox">
                <center>
             
                        <div id="box" style="line-height: 0.4;">
                            <h1 style="color: #2c3e50;"><u>Demographics</u></h1><br><br>

                            <form id="userForm">
                                <p><strong>What's your full name?</strong>
								<span class="info-icon" data-tooltip="Please enter your full legal name exactly as it appears on your passport. This should include your first name, middle name(s), and last name, ensuring that all spelling and punctuation match your legal documents.">i</span>
								</p>
								<input type="text" id="PetitionerName1[0]" name="PetitionerName1[0]" placeholder="Full name" required>

								
								<br><br>
								<label class="checkbox-label"><input type="checkbox" name="food_stamps" value="Yes"> Food Stamps</label>
								
								
                                <p><strong>What's your email? <br> <br><br> </strong> (Email will be linked to your account for future forms)</strong></p>
                                <input type="email" id="email" name="email" placeholder="Email" required>
                                <br><br>
                            </form>
                            <p><strong>What's your street address?</strong></p>
                            <input type="text" id="Street" name="Street" placeholder="Street">
                            <input type="text" id="PetitionerCity[0]" name="PetitionerCity[0]" placeholder="City" required>
                            <br><br>
                            <input type="text" id="County" name="County" placeholder="County" required>
                            <input type="text" id="PetitionerState[0]" name="PetitionerState[0]" placeholder="State" required>
                            <br><br>
                            <input type="text" id="PetitionerZip[0]" name="PetitionerZip[0]" placeholder="Zip" required>
                            <br><br>
                            <p><strong>What's your phone number?</strong></p>
                            <input type="text" id="PetitionerTel[0]" name="PetitionerTel[0]" placeholder="Phone Number" required>
                            <br><br><br><br>
						
						
						 <button class="done-button" type="button" onclick="editPDF()"> Download From </h1></button>
	<br><br>
	<button class="done-button" type="button" onclick="restart()"> Review Answers </h1></button>
	<br><br>
	
	
                        </div>
						
	
                    </center>
                </center>
            </div>
			
			
    <footer>
        &copy; 2024 FormWiz. All rights reserved.
    </footer>

   <div id="pdfPreview" style="display:none;">
    <iframe id="pdfFrame" style = "display:none"></iframe>
</div>	
<input type="text" id="current_date" name="current_date" placeholder="current_date" style="display:none">	
<script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
<script>

let uploadedPdfFile = null;

function downloadPDF() {
    var iframe = document.getElementById('pdfFrame');
    var url = iframe.src;
    var downloadLink = document.createElement("a");
    downloadLink.href = url;
    downloadLink.download = "ModifiedDocument.pdf";
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
}

function loadDefaultPDF() {
    const defaultUrl = 'http://localhost:3000/form.pdf';
    fetch(defaultUrl)
        .then(response => response.blob())
        .then(blob => {
            uploadedPdfFile = blob;
            displayPDF(blob);
        })
        .catch(error => {
            console.error('Error loading default PDF:', error);
           // alert('Error loading default PDF: ' + error.message);
        });
}

function displayPDF(pdfBlob) {
    var url = URL.createObjectURL(pdfBlob);
    document.getElementById('pdfFrame').src = url;
    //document.getElementById('pdfPreview').style.display = 'block';
}


var formData = new FormData();

//edit pdf code
async function editPDF() {
    
	
	formData = new FormData(); // Reset formData for fresh use each time the function is called.

    if (!uploadedPdfFile) {
        //alert('No PDF file is loaded for editing. Please upload the file again.');
        return;
    }

    // Collect inputs from the form
    const inputs = document.querySelectorAll('#questions input, #questions select');
    inputs.forEach(input => {
        if (input.type === 'checkbox') {
            formData.append(input.name, input.checked ? 'Yes' : 'No');
        } else {
            formData.append(input.name, input.value);
        }
    });
	
	
	
	
    // Append the PDF file to formData
    formData.append('pdf', uploadedPdfFile);

    // Debugging: Log the form data
    console.log('FormData contents:');
    for (var pair of formData.entries()) {
        console.log(`${pair[0]}: ${pair[1]}`);
    }

    // Send the formData to the server
    fetch('/edit_pdf', {
        method: 'POST',
        body: formData,
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`Network response was not ok: ${response.statusText}`);
        }
        return response.blob();
    })
    .then(blob => {
        var url = window.URL.createObjectURL(blob);
        document.getElementById('pdfFrame').src = url;
        //document.getElementById('pdfPreview').style.display = 'block';
        downloadPDF();
    })
    .catch(error => {
        console.error('Error updating PDF:', error);
        //alert('Error updating PDF: ' + error.message);
    });
}


function setCurrentDate() {
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();
    today = yyyy + '-' + mm + '-' + dd;
    document.getElementById('current_date').value = today;
}


window.onload = function() {
    loadDefaultPDF();
    setCurrentDate();
};

</script>
    </body>
    </html>
    